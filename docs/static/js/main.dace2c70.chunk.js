(this["webpackJsonpdraw-something-client"]=this["webpackJsonpdraw-something-client"]||[]).push([[0],{113:function(e,t,n){e.exports=n(140)},127:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){},130:function(e,t,n){},131:function(e,t,n){},132:function(e,t,n){},133:function(e,t,n){},134:function(e,t,n){},135:function(e,t,n){},136:function(e,t,n){},137:function(e,t,n){},138:function(e,t,n){},139:function(e,t,n){},140:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"SET_USERNAME",(function(){return j})),n.d(a,"SET_USER",(function(){return C})),n.d(a,"SET_USER_CURRENT_ROOM_ID",(function(){return N})),n.d(a,"SET_IS_READY",(function(){return _})),n.d(a,"SET_IS_GAMING",(function(){return w}));var r={};n.r(r),n.d(r,"SET_NUMBER_OF_ONLINE_PLAYER",(function(){return I})),n.d(r,"ADD_NOTIFICATION",(function(){return k})),n.d(r,"SHIFT_NOTIFICATION",(function(){return T}));var c={};n.r(c),n.d(c,"SET_ROOM_LIST",(function(){return A})),n.d(c,"SET_CURRENT_ROOM_USERS",(function(){return x})),n.d(c,"SET_CURRENT_ROOM_STATUS",(function(){return M})),n.d(c,"SET_CURRENT_GAME",(function(){return P})),n.d(c,"SET_ROOM",(function(){return D}));var o={};n.r(o),n.d(o,"createSetUsername",(function(){return ee})),n.d(o,"createSetUser",(function(){return te})),n.d(o,"createSetIsGaming",(function(){return ne})),n.d(o,"createSetUserCurrentRoomId",(function(){return ae})),n.d(o,"createSetIsReady",(function(){return re}));var i={};n.r(i),n.d(i,"createSetNumberOfOnlinePlayer",(function(){return ce})),n.d(i,"createAddNotification",(function(){return oe})),n.d(i,"createShiftNotification",(function(){return ie}));var l={};n.r(l),n.d(l,"createSetRoomList",(function(){return le})),n.d(l,"createSetCurrentRoomUsers",(function(){return ue})),n.d(l,"createSetRoom",(function(){return se})),n.d(l,"createSetCurrentGame",(function(){return me})),n.d(l,"createSetCurrentRoomStatus",(function(){return fe}));var u={};n.r(u),n.d(u,"login",(function(){return Oe})),n.d(u,"changeUsername",(function(){return ge}));var s={};n.r(s),n.d(s,"login",(function(){return Re})),n.d(s,"changeUsername",(function(){return je}));var m={};n.r(m),n.d(m,"getNumberOfOnlinePlayer",(function(){return Ce}));var f={};n.r(f),n.d(f,"getRoomList",(function(){return Ae})),n.d(f,"enterRoom",(function(){return Me})),n.d(f,"leaveRoom",(function(){return Pe})),n.d(f,"createRoom",(function(){return De})),n.d(f,"sendChatMessage",(function(){return Ue})),n.d(f,"makeGameIsReady",(function(){return Ge})),n.d(f,"getGame",(function(){return Le}));var d=n(0),E=n.n(d),v=n(10),p=n.n(v),h=n(28),O=n(34),b=n(88),g=n(70),S=n(9),y=n(30),R=n(44),j="SET_USERNAME",C="SET_USER",N="SET_USER_CURRENT_ROOM_ID",_="SET_IS_READY",w="SET_IS_GAMING",I="SET_NUMBER_OF_ONLINE_PLAYER",k="ADD_NOTIFICATION",T="REMOVE_NOTIFICATION",A="SET_ROOM_LIST",x="SET_CURRENT_ROOM_USERS",M="SET_CURRENT_ROOM_STATUS",P="SET_CURRENT_GAME",D="SET_ROOM",U={isLogining:!1,user:null,isRegistering:!1};var G={numberOfOnlinePlayer:1,notifications:[]};var L={roomList:[],currentRoom:null,currentGame:null};function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var W={user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;return Object(R.a)(e,(function(e){var n=t.type,r=t.payload;switch(n){case a.SET_USERNAME:null!=e.user&&(e.user.username=r);break;case a.SET_USER:e.user=r;break;case a.SET_IS_GAMING:null!=e.user&&(e.user.isGaming=r);break;case a.SET_IS_READY:null!=e.user&&(e.user.isReady=r);break;case a.SET_USER_CURRENT_ROOM_ID:null!=e.user&&(e.user.currentRoomId=r)}}))},global:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;return Object(R.a)(e,(function(e){var n=t.type,a=t.payload;switch(n){case r.SET_NUMBER_OF_ONLINE_PLAYER:e.numberOfOnlinePlayer=a;break;case r.ADD_NOTIFICATION:e.notifications.push(a);break;case r.SHIFT_NOTIFICATION:e.notifications.shift()}}))},room:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;return Object(R.a)(e,(function(e){var n=t.type,a=t.payload;switch(n){case c.SET_ROOM_LIST:e.roomList=a;break;case c.SET_CURRENT_ROOM_USERS:null!=e.currentRoom&&(e.currentRoom.users=a);break;case c.SET_ROOM:e.currentRoom=a;break;case c.SET_CURRENT_GAME:e.currentGame=a;break;case c.SET_CURRENT_ROOM_STATUS:null!=e.currentRoom&&(e.currentRoom.status=a)}}))}},z=function(e){return Object(h.c)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(n,!0).forEach((function(t){Object(S.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({router:Object(y.b)(e)},W))};function q(){var e=localStorage.getItem("__token");if(null!=e)return e}function B(e){localStorage.setItem("__token",e)}function H(e){return function(t){13===t.keyCode&&e()}}var V=["localhost","127.0.0.1","192.168"].some((function(e){return window.location.origin.includes(e)})),Y=Object(O.a)(),J=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||h.d;var X=n(6),K=n(64),Q=n(13),Z=n.n(Q),$=n(21);function ee(e){return{type:a.SET_USERNAME,payload:e}}function te(e){return{type:a.SET_USER,payload:e}}function ne(e){return{type:a.SET_IS_GAMING,payload:e}}function ae(e){return{type:a.SET_USER_CURRENT_ROOM_ID,payload:e}}function re(e){return{type:a.SET_IS_READY,payload:e}}function ce(e){return{type:r.SET_NUMBER_OF_ONLINE_PLAYER,payload:e}}var oe=function(e){return{type:r.ADD_NOTIFICATION,payload:e}},ie=function(){return{type:r.SHIFT_NOTIFICATION}};function le(e){return{type:c.SET_ROOM_LIST,payload:e}}function ue(e){return{type:c.SET_CURRENT_ROOM_USERS,payload:e}}function se(e){return{type:c.SET_ROOM,payload:e}}function me(e){return{type:c.SET_CURRENT_GAME,payload:e}}function fe(e){return{type:c.SET_CURRENT_ROOM_STATUS,payload:e}}var de=n(25),Ee=n(24),ve=n(1),pe=function(){function e(t,n,a){Object(de.a)(this,e),this.data=t,this.handler=n,this.desc=a,this.id=void 0,this.createAt=Date.now(),this.id="".concat(this.handler,"-").concat(Date.now())}return Object(Ee.a)(e,[{key:"toJSON",value:function(){return Object(ve.a)({},this)}}]),e}();var he=new(function(){function e(t){Object(de.a)(this,e),this.options=t,this.isConnected=!1,this.ws=void 0,this.messageCache=[],this.eventMap=new Map,this.ws=new window.WebSocket(this.options.addr),this.init()}return Object(Ee.a)(e,[{key:"init",value:function(){var e=this;this.ws.onopen=function(t){e.isConnected=!0,"function"===typeof e.options.onopen&&e.options.onopen(t),e.sendMessageFromCache()},this.ws.onclose=function(t){e.isConnected=!1,"function"===typeof e.options.onclose&&(e.options.onclose(t),V&&console.log("\u8fde\u63a5\u65ad\u5f00"))},this.ws.onerror=function(t){"function"===typeof e.options.onerror&&e.options.onerror(t)},this.ws.onmessage=function(t){var n=t.data,a=JSON.parse(n);console.log("recive",a),e.emit("message",a),null!=a.requestId&&e.emit(a.requestId,a),null!=a.trigger&&e.emit(a.trigger,a)}}},{key:"sendMessageFromCache",value:function(){var e=this;this.messageCache.forEach((function(t){e.sendMessage(t)})),this.messageCache=[]}},{key:"sendMessage",value:function(e){this.isConnected?(console.log("sendMessage",e),this.ws.send(JSON.stringify(e))):this.messageCache.push(e)}},{key:"request",value:function(e,t){var n=this;return new Promise((function(a,r){try{var c=new pe(t,e);n.on(c.id,(function e(t,o){null==o&&console.error("".concat(c.handler,"-").concat(c.id," \u8fd4\u56de\u6765\u7a7a\u7684message")),null!=o.error&&(n.emit("error",o),r(o.error)),a(o),null!=o.requestId&&n.off(o.requestId,e),V&&null!=o.requestId&&o.requestId!==c.id&&console.error("reqMsg.id: ".concat(c.id," !== respMsg.requestId\uff1a ").concat(o.requestId))})),n.sendMessage(c)}catch(o){console.error("request\u65f6\u53d1\u751f\u9519\u8bef ".concat(o))}}))}},{key:"on",value:function(e,t){var n=this,a=this.eventMap.get(e);return void 0===a&&(a=[],this.eventMap.set(e,a)),a.push(t),function(){n.off(e,t)}}},{key:"off",value:function(e,t){var n=this.eventMap.get(e);void 0!==n&&(n=n.filter((function(e){return e!==t})),this.eventMap.set(e,n))}},{key:"emit",value:function(e,t){var n=this.eventMap.get(e);void 0!==n&&n.forEach((function(e){return e(t.data,t)}))}}]),e}())({addr:(V?{addr:"ws://192.168.137.1:9421"}:{addr:"ws://101.37.174.138:9421"}).addr});function Oe(e){return be.apply(this,arguments)}function be(){return(be=Object($.a)(Z.a.mark((function e(t){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he.request("login",t);case 2:return n=e.sent.data,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(e){return Se.apply(this,arguments)}function Se(){return(Se=Object($.a)(Z.a.mark((function e(t){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he.request("changeUsername",t);case 2:return n=e.sent.data,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ye={user:u};function Re(){return function(){var e=Object($.a)(Z.a.mark((function e(t){var n,a;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=q(),e.next=3,ye.user.login(n);case 3:B((a=e.sent).token),t(o.createSetUser(a));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function je(e){return function(){var t=Object($.a)(Z.a.mark((function t(n){var a;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ye.user.changeUsername(e);case 2:a=t.sent,n(o.createSetUsername(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function Ce(){return function(){var e=Object($.a)(Z.a.mark((function e(t){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,he.request("numberOfOnlineUser");case 3:n=e.sent.data,t(i.createSetNumberOfOnlinePlayer(n)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}var Ne,_e,we=n(91),Ie=n.n(we),ke=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",a=arguments.length>2?arguments[2]:void 0;Object(de.a)(this,e),this.title=t,this.type=n,this.detail=a,this.id=Ie()(),this.createAt=Date.now()},Te=n(19);function Ae(){return function(){var e=Object($.a)(Z.a.mark((function e(t){var n,a;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,he.request("roomList");case 3:n=e.sent,a=n.data,t(l.createSetRoomList(a)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}!function(e){e.WAITING="waiting",e.GAMING="gaming"}(Ne||(Ne={})),function(e){e.PUBLIC="public",e.PRIVATE="private"}(_e||(_e={}));var xe=!1;function Me(e){return function(){var t=Object($.a)(Z.a.mark((function t(n){var a,r,c,u;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!xe){t.next=2;break}return t.abrupt("return");case 2:return xe=!0,t.prev=3,t.next=6,he.request("userEnter",{roomId:e});case 6:a=t.sent,r=a.data,c=r.room,u=r.user,Object(X.c)((function(){n(l.createSetRoom(c)),n(o.createSetUserCurrentRoomId(u.currentRoomId)),n(Object(Te.e)("/room/".concat(c.id)))})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),Object(X.c)((function(){n(Object(Te.e)("/")),n(i.createAddNotification(new ke(t.t0.title,"error")))}));case 14:return t.prev=14,xe=!1,t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[3,11,14,17]])})));return function(e){return t.apply(this,arguments)}}()}function Pe(){return function(){var e=Object($.a)(Z.a.mark((function e(t,n){var a,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n(),null!=(r=a.user.user)&&null!=r.currentRoomId){e.next=3;break}return e.abrupt("return");case 3:try{he.request("userLeave"),t(o.createSetUserCurrentRoomId(void 0)),t(l.createSetRoom(null)),t(Object(Te.e)("/"))}catch(c){console.error(c)}case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}function De(e,t){return function(){var n=Object($.a)(Z.a.mark((function n(a){var r,c;return Z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,he.request("createRoom",{name:e,type:t});case 3:r=n.sent,c=r.data,a(Me(c.id)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.error(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()}function Ue(e){return function(){var t=Object($.a)(Z.a.mark((function t(n){return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{he.request("sendChatMessage",{content:e})}catch(n){console.error(n)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function Ge(e){var t=e?"makeGameReady":"cancelGameReady";return function(){var e=Object($.a)(Z.a.mark((function e(n){var a,r,c,i;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,he.request(t);case 3:a=e.sent,r=a.data,c=r.user,i=r.room,n(l.createSetCurrentRoomUsers(i.users)),n(o.createSetIsReady(c.isReady)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}function Le(){return function(){var e=Object($.a)(Z.a.mark((function e(t,n){var a,r,c,o,u;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(),r=a.user.user,e.prev=1,e.next=4,he.request("getGame");case 4:c=e.sent,o=c.data,u=o.game,t(l.createSetCurrentGame(u)),t(l.createSetCurrentRoomStatus(Ne.GAMING)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),t(i.createAddNotification(new ke(e.t0.title,"error"))),null!=r&&null!=r.currentRoomId?t(Object(Te.f)("/room/".concat(r.currentRoomId))):t(Object(Te.f)("/"));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()}var Fe=n(177);function We(){return E.a.createElement("div",{className:"full-screen-loading",style:{display:"flex",justifyContent:"center",alignItems:"center"}},E.a.createElement(Fe.a,null))}n(127);var ze,qe=n(181),Be=n(184),He=n(182),Ve=n(183),Ye=n(92),Je=(ze={},Object(S.a)(ze,Ne.GAMING,"\u6e38\u620f\u4e2d"),Object(S.a)(ze,Ne.WAITING,"\u7b49\u5f85\u4e2d..."),ze);function Xe(e){var t=e.room,n=Object(X.f)();return E.a.createElement("div",{className:"room-list-room"},E.a.createElement("div",{className:"room-info"},E.a.createElement("div",{className:"room-name"},t.name),E.a.createElement("div",{className:"room-number"},"No.",String(t.id).padStart(5,"0"))),E.a.createElement("div",{className:"room-actions"},E.a.createElement("div",{className:"room-status"},Je[t.status]),E.a.createElement(qe.a,{onClick:function(){return n(Object(Te.e)("/room/".concat(t.id)))},style:{boxShadow:"none"},fullWidth:!0,variant:"contained",color:"primary"},"\u52a0\u5165","(".concat(t.users.length,"/").concat(t.maxPlayerNumber,")"))))}var Ke=function(e){return{roomList:e.room.roomList}};function Qe(){V&&console.log("render RoomList");var e=Object(X.g)(Ke,X.e).roomList,t=Object(X.f)(),n=Object(d.useCallback)((function(){t(f.getRoomList())}),[t]);return Object(d.useEffect)((function(){n();var e=he.on("refreshRoomList",(function(e){var n=e;t(l.createSetRoomList(n))}));return function(){e()}}),[t,n]),E.a.createElement("div",{className:"room-list"},E.a.createElement(He.a,{subheader:E.a.createElement(Ve.a,null,"\u623f\u95f4\u5217\u8868",E.a.createElement(Be.a,{onClick:n},E.a.createElement(Ye.a,null))),className:"room-list"},0===e.length?E.a.createElement("div",{className:"no-room-text"},"\u6682\u65e0\u516c\u5f00\u623f\u95f4"):E.a.createElement("div",{className:"room-list-content"},e.map((function(e){return E.a.createElement(Xe,{key:e.id,room:e})})))))}var Ze=n(11),$e=n(190),et=n(191),tt=n(192),nt=n(200),at=n(185),rt=n(186),ct=n(189),ot=n(198),it=n(93),lt=(n(128),function(e){return{user:e.user.user}});function ut(){V&&console.log("render AccountCard");var e=Object(X.g)(lt,X.e).user,t=Object(d.useState)(null!=e?e.username:""),n=Object(Ze.a)(t,2),a=n[0],r=n[1],c=Object(d.useCallback)((function(e){return r(e.target.value.trim())}),[r]),o=Object(d.useState)(!1),i=Object(Ze.a)(o,2),l=i[0],u=i[1],m=Object(X.f)(),f=Object(d.useCallback)((function(){return u(!0)}),[u]),v=Object(d.useCallback)((function(){return u(!1)}),[u]),p=Object(d.useCallback)((function(){var t=0===a.trim().length;null==e||t||e.username===a||m(s.changeUsername(a)),t||v()}),[e,a,m,v]);return null==e?E.a.createElement(We,null):E.a.createElement(E.a.Fragment,null,E.a.createElement(nt.a,{open:l,onClose:v},E.a.createElement(at.a,null,"\u66f4\u6539\u7528\u6237\u540d"),E.a.createElement(rt.a,null,E.a.createElement(ot.a,{fullWidth:!0,type:"text",placeholder:"\u7528\u6237\u540d",value:a,onChange:c})),E.a.createElement(ct.a,null,E.a.createElement(qe.a,{disabled:0===a.trim().length,onClick:p},"\u786e\u5b9a"),E.a.createElement(qe.a,{onClick:v},"\u53d6\u6d88"))),E.a.createElement("div",{className:"user-info"},E.a.createElement($e.a,null,E.a.createElement(et.a,{title:E.a.createElement("span",{style:{color:"#000"}},"\u4f60\u597d\uff0c",e.username,"\uff01"),subheader:"\u767b\u9646\u4e8e".concat((new Date).toLocaleTimeString()),avatar:E.a.createElement(tt.a,null,e.username[0]),action:E.a.createElement(Be.a,{onClick:f},E.a.createElement(it.a,null))}))))}var st=n(193),mt=n(194),ft=n(49),dt=n(94),Et=n(95),vt=E.a.memo((function(){var e=Object(X.f)(),t=Object(d.useState)(!1),n=Object(Ze.a)(t,2),a=n[0],r=n[1],c=Object(d.useCallback)((function(){return r(!1)}),[r]),o=Object(d.useState)(""),i=Object(Ze.a)(o,2),l=i[0],u=i[1],s=Object(d.useCallback)((function(){0!==l.trim().length&&e(Object(Te.e)("/room/".concat(l)))}),[l,e]);return E.a.createElement(E.a.Fragment,null,E.a.createElement(nt.a,{open:a,onClose:c},E.a.createElement(at.a,null,"\u67e5\u627e\u623f\u95f4"),E.a.createElement(rt.a,null,E.a.createElement(ot.a,{fullWidth:!0,type:"text",placeholder:"\u623f\u95f4\u53f7",value:l,onChange:function(e){return u(e.target.value.trim())},onKeyUp:H(s)})),E.a.createElement(ct.a,null,E.a.createElement(qe.a,{disabled:0===l.trim().length,onClick:s},"\u786e\u5b9a"),E.a.createElement(qe.a,{onClick:c},"\u53d6\u6d88"))),E.a.createElement(st.a,{style:{boxShadow:"none"},position:"static"},E.a.createElement(mt.a,null,E.a.createElement(Be.a,{color:"default",onClick:function(){return r(!0)}},E.a.createElement(dt.a,null)),E.a.createElement(ft.a,{style:{flex:1,textAlign:"center"}},"\u4f60\u753b\u6211\u731c-\u6e38\u620f\u5927\u5385"),E.a.createElement(Be.a,{onClick:function(){return e(Object(Te.e)("/create-room"))}},E.a.createElement(Et.a,null)))))}));n(129);function pt(e){var t=Object(d.useRef)("");Object(d.useEffect)((function(){return t.current=document.title,document.title=e,function(){document.title=t.current}}),[e])}var ht=function(e){return{numberOfOnlinePlayer:e.global.numberOfOnlinePlayer,user:e.user.user}};n(130);var Ot=n(201),bt=n(96),gt=function(e){return{notifications:e.global.notifications}},St=E.a.memo((function(){var e=Object(X.g)(gt,X.e).notifications,t=Object(X.f)(),n=Object(d.useCallback)((function(){t(i.createShiftNotification())}),[t]);return E.a.createElement(E.a.Fragment,null,e.map((function(e){return E.a.createElement(Ot.a,{key:e.id,anchorOrigin:{vertical:"top",horizontal:"center"},open:!0,onClose:n,autoHideDuration:4e3,action:E.a.createElement(Be.a,{onClick:n,key:"close","aria-label":"close",color:"inherit"},E.a.createElement(bt.a,null)),message:E.a.createElement("span",null,null==e.detail?e.title:"".concat(e.title,"-").concat(e.detail))})})))}));n(131);var yt=n(187),Rt=n(196),jt=n(195),Ct=n(199),Nt=n(202),_t=n(62),wt=function(e){var t=e.global.numberOfOnlinePlayer,n=e.user.user;return{numberOfOnlinePlayer:t,username:null==n?"":n.username}};var It;n(132);!function(e){e.REFRESH_USER="refreshUser",e.REFRESH_ROOM="refreshRoom",e.REFRESH_ROOM_LIST="refreshRoomList",e.ROOM_CHATTING="roomChatting",e.TIMEOUT="timeout",e.REFRESH_GAME="refreshGame",e.DRAW_ACTION="drawAction",e.START_GAME="startGame",e.GAME_CHATTING="gameChatting",e.CHANGE_DRAWER="changeDrawer",e.ROUND_OVER="roundOver",e.GAME_OVER="gameOver",e.PLAY_OVER="playOver"}(It||(It={}));var kt=n(17),Tt=(n(133),function(e){var t=e.user.user;return{username:null==t?"":t.username,userId:null==t?"":t.id}});var At,xt=function(){var e=Object(X.g)(Tt,X.e).userId,t=Object(d.useState)([]),n=Object(Ze.a)(t,2),a=n[0],r=n[1];Object(d.useEffect)((function(){return he.on(It.ROOM_CHATTING,(function(e,t){var n=t.data;r((function(e){var t;return(t=[n]).concat.apply(t,Object(kt.a)(e))}))}))}),[r]);var c=Object(d.useState)(""),o=Object(Ze.a)(c,2),i=o[0],l=o[1],u=0!==i.trim().length,s=Object(X.f)(),m=Object(d.useCallback)((function(){u&&(l(""),s(f.sendChatMessage(i)))}),[u,i,s,l]);return E.a.createElement("div",{className:"room-message"},E.a.createElement(He.a,{className:"room-message-list"},a.map((function(t){return E.a.createElement(jt.a,{className:"room-message-list-item",key:t.id},E.a.createElement("div",{className:"room-message-speaker"},E.a.createElement("span",{className:"room-message-speaker-name"},t.speaker.id===e?"\u6211":t.speaker.name,":")),E.a.createElement("div",{className:"room-message-content"},t.content),E.a.createElement("div",{className:"room-message-speaker-time"},new Date(t.timestamp).toLocaleTimeString()))}))),E.a.createElement(He.a,{className:"room-message-sender"},E.a.createElement(jt.a,null,E.a.createElement(ot.a,{variant:"outlined",value:i,onChange:function(e){return l(e.target.value)},onKeyUp:H(m),fullWidth:!0}),"\xa0",E.a.createElement(qe.a,{onClick:m,disabled:!u,variant:"text"},"\u53d1\u9001"))))},Mt=function(e){var t=e.room.currentRoom;return{roomId:t?t.id:-1,roomName:t?t.name:"",roomType:t?t.type:_e.PUBLIC}},Pt=(At={},Object(S.a)(At,_e.PRIVATE,"(\u79c1\u4eba)"),Object(S.a)(At,_e.PUBLIC,""),At),Dt=E.a.memo((function(){pt("\u623f\u95f4");var e=Object(X.g)(Mt,X.e),t=e.roomName,n=e.roomType,a=e.roomId,r=Object(X.f)();return E.a.createElement(st.a,{style:{boxShadow:"none"},position:"static"},E.a.createElement(mt.a,null,E.a.createElement(qe.a,{onClick:function(){console.log("cliuck"),r(f.leaveRoom())},color:"inherit"},E.a.createElement(_t.a,null),"\u79bb\u5f00\u623f\u95f4"),E.a.createElement(ft.a,{style:{flex:1,textAlign:"center"}},t,Pt[n]),E.a.createElement(qe.a,{color:"inherit"},"\u623f\u95f4\u53f7: ",String(a).padStart(5,"0"))))})),Ut=(n(134),new Array(8).fill(null)),Gt=function(e){var t=e.user.user;return{userId:t?t.id:""}},Lt=E.a.memo((function(e){var t=e.users,n=Object(X.g)(Gt,X.e).userId;return E.a.createElement("div",{className:"user-list"},Ut.map((function(e,a){if(a<t.length){var r=t[a];return E.a.createElement("div",{key:r.id,className:"player-list-item active"},E.a.createElement("div",{className:"user-status"},r.id===n?E.a.createElement("div",{className:"player-list-item-status"},"\u6211"):null,r.isReady?E.a.createElement("div",{className:"player-list-item-status"},"\u5df2\u51c6\u5907"):null,r&&0===a?E.a.createElement("div",{className:"player-list-item-status"},"\u623f\u4e3b"):null,E.a.createElement("div",{className:"user-avatar"},r.username[0])),E.a.createElement("div",{className:"player-list-item-username"},r.username))}return E.a.createElement("div",{key:a,className:"player-list-item"},E.a.createElement("div",{className:"user-status"},E.a.createElement("div",{className:"user-avatar"},"\u7a7a")),E.a.createElement("div",{className:"player-list-item-username"},"\u7b49\u5f85\u52a0\u5165"))})))})),Ft=function(e){var t=e.room.currentRoom,n=e.user.user;return{currentRoom:t,isReady:null!=n&&n.isReady}};var Wt=function(e){return{user:e.user.user,pathname:e.router.location.pathname}};n(135),n(136);function zt(e){var t=e.text;return E.a.createElement("div",{className:"user-avatar-status"},t)}function qt(e){var t=e.children,n=e.avatar;return E.a.createElement("div",{style:{height:64,width:64},className:"user-avatar-wrapper"},t,E.a.createElement("div",{style:{backgroundColor:"orange"},className:"user-avatar"},n))}E.a.createElement(zt),qt.AvatarStatus=zt;var Bt=qt;n(137);var Ht,Vt=function(e){var t=e.wsClient,n=Object(d.useState)(""),a=Object(Ze.a)(n,2),r=a[0],c=a[1],o=Object(d.useCallback)((function(){if(0!==r.length){var e=new pe(r,"guessAnswer");t.sendMessage(e),c("")}}),[r,t,c]);return E.a.createElement("div",{className:"answer-input-box"},E.a.createElement(ot.a,{value:r,onChange:function(e){return c(e.target.value.trim())},placeholder:"\u7b54\u6848",className:"answer-input",variant:"outlined",type:"text"}),E.a.createElement(qe.a,{disabled:0===r.length,variant:"outlined",onClick:o},"\u53d1\u9001"))},Yt=(n(138),function(){function e(t,n){Object(de.a)(this,e),this.ctx=void 0,this.canvasEl=void 0,this.canvasEl=null==t?document.createElement("canvas"):t,this.ctx=this.canvasEl.getContext("2d"),this.init(),null!=n&&(null!=n.penColor&&this.setPenColor(n.penColor),null!=n.penSize&&this.setPenSize(n.penSize))}return Object(Ee.a)(e,[{key:"penColor",get:function(){return this.ctx.strokeStyle},set:function(e){this.ctx.strokeStyle=e,this.ctx.fillStyle=e}},{key:"penSize",get:function(){return this.ctx.lineWidth},set:function(e){this.ctx.lineWidth=e}}]),Object(Ee.a)(e,[{key:"init",value:function(){this.ctx.fillStyle=this.penColor,this.ctx.strokeStyle=this.penColor,this.ctx.lineWidth=this.penSize}},{key:"getSetting",value:function(){return{penSize:this.penSize,penColor:this.penColor}}},{key:"setting",value:function(e){null!=e.penColor&&(this.penColor=e.penColor),null!=e.penSize&&(this.penSize=e.penSize)}},{key:"drawImage",value:function(e){var t=this;if("string"===typeof e){var n=new Image;n.onload=function(){t.clearCanvas(),t.drawImage(n)},n.src=e}else this.ctx.drawImage(e,0,0)}},{key:"drawPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.penSize/2,n=this.ctx;console.log("drawPoint","r",t,"lineWidth",this.ctx.lineWidth),n.beginPath(),n.arc(e.x,e.y,t,0,2*Math.PI),n.fill(),n.closePath()}},{key:"getSnapshot",value:function(){return this.canvasEl.toDataURL("image/jpeg",1)}},{key:"startDrawLine",value:function(e){var t=e,n=this.ctx;n.beginPath(),n.moveTo(t.x,t.y)}},{key:"drawLineTo",value:function(e){var t=this.ctx;t.lineTo(e.x,e.y),t.stroke()}},{key:"mount",value:function(e){var t=document.querySelector(e);if(null==t)throw new Error("\u65e0\u6cd5\u901a\u8fc7 ".concat(e," \u627e\u5230\u76f8\u5e94\u7684\u5143\u7d20\uff0c\u8bf7\u786e\u5b9a\u9009\u62e9\u5668\u4e66\u5199\u6b63\u786e\uff0c\u6216\u5143\u7d20\u786e\u5b9e\u5b58\u5728"));t.append(this.canvasEl),this.canvasEl.height=t.clientHeight,this.canvasEl.width=t.clientWidth,this.clearCanvas()}},{key:"clearCanvas",value:function(){var e=this.ctx.fillStyle;this.ctx.fillStyle="#fff",this.ctx.clearRect(0,0,this.canvasEl.width,this.canvasEl.height),this.ctx.fillRect(0,0,this.canvasEl.width,this.canvasEl.height),this.ctx.fillStyle=e}},{key:"setOptions",value:function(e){null!=e.penColor&&this.setPenColor(e.penColor),null!=e.penSize&&this.setPenSize(e.penSize)}},{key:"getOptions",value:function(){return{penColor:this.penColor,penSize:this.penSize}}},{key:"setPenSize",value:function(e){this.ctx.lineWidth=e}},{key:"setPenColor",value:function(e){this.ctx.strokeStyle=e,this.ctx.fillStyle=e}}]),e}());!function(e){e.START_DRAW_LINE="startDrawLine",e.DRAW_LINE_TO="drawLineTo",e.END_DRAW_LINE="endDrawLine",e.DRAW_IMAGE="drawImage",e.CLEAR_CANVAS="clearCanvas"}(Ht||(Ht={}));var Jt=function e(t,n){Object(de.a)(this,e),this.type=t,this.payload=n},Xt=n(100),Kt=n(101),Qt=n(99),Zt=n(188),$t=n(97),en=n(98),tn=["#000","#F44336","#E91E63","#9C27B0","#2196F3","#48C6FF","#4CAF50","#8BC34A","#FFEB3B","#FFC107","#FF9800","#795548","#607D8B","#666","#999","#BBB","#DDD","#FFF"];function nn(e){var t=e.anchorEl,n=e.penColor,a=e.setPenColor,r=Object(d.useState)(!1),c=Object(Ze.a)(r,2),o=c[0],i=c[1],l=Object(d.useCallback)((function(e){a(e),i(!1)}),[a,i]);return E.a.createElement(E.a.Fragment,null,E.a.createElement(Be.a,{style:{flex:"1"},onClick:function(){return i((function(e){return!e}))},className:"canvas-operation-list-item"},E.a.createElement($t.a,{style:{color:n},fontSize:"large"})),E.a.createElement(Zt.a,{anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},anchorEl:t,onClose:function(){return i(!1)},open:o},E.a.createElement("div",{className:"pen-color-wrapper"},tn.map((function(e){return E.a.createElement(Be.a,{onClick:function(){return l(e)},key:e},E.a.createElement(en.a,{style:{border:"1px solid #000",color:e}}))})))))}var an=n(203);function rn(e){var t=e.length,n=e.width,a=e.vertical,r=e.color;if(null==t&&(t=24),null==n&&(n=2),null==a&&(a=!1),null==r&&(r="#000"),a){var c=[n,t];t=c[0],n=c[1]}return E.a.createElement("div",{className:"plain-line",style:{height:n,width:t,backgroundColor:r}})}function cn(e){var t=e.anchorEl,n=e.penColor,a=e.penSize,r=e.setPenSize,c=Object(d.useCallback)((function(e,t){r(t)}),[r]),o=Object(d.useState)(!1),i=Object(Ze.a)(o,2),l=i[0],u=i[1];return E.a.createElement(E.a.Fragment,null,E.a.createElement(Be.a,{style:{flex:"1"},onClick:function(){return u((function(e){return!e}))},className:"canvas-operation-list-item"},E.a.createElement(rn,{color:n,length:30,width:a})),E.a.createElement(Zt.a,{anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},anchorEl:null==t?void 0:t,onClose:function(){return u(!1)},open:l},E.a.createElement("div",{className:"pen-size-slider-wrapper"},E.a.createElement(an.a,{style:{width:"80vw"},value:a,onChange:c,valueLabelDisplay:"auto",step:1,marks:!0,min:1,max:20}))))}function on(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ln(e,t,n){var a=new Jt(e,t),r=new pe(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?on(n,!0).forEach((function(t){Object(S.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):on(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({drawAction:a},void 0!==n?n:{}),"drawAction");he.sendMessage(r)}function un(e){var t=e.touches,n=e.target,a=t[0],r=a.clientX,c=a.clientY;return{x:r-n.offsetLeft,y:c-n.offsetTop}}var sn=E.a.memo((function(e){var t=e.isSelfPlaying,n=e.initialDrawing,a=Object(d.useRef)(new Yt).current,r=Object(d.useState)([]),c=Object(Ze.a)(r,2),o=c[0],i=c[1],l=Object(d.useState)([]),u=Object(Ze.a)(l,2),s=u[0],m=u[1],f=Object(d.useState)("#000"),v=Object(Ze.a)(f,2),p=v[0],h=v[1],O=Object(d.useState)(1),b=Object(Ze.a)(O,2),g=b[0],S=b[1],y=Object(d.useRef)(!1);Object(d.useLayoutEffect)((function(){!1===y.current&&(a.mount("#id-canvas"),void 0!==n&&a.drawImage(n),y.current=!0)}),[a,n]),Object(d.useEffect)((function(){var e=he.on(It.CHANGE_DRAWER,(function(){a.clearCanvas(),i([]),m([])})),t=he.on(It.DRAW_ACTION,(function(e){var t=e,n=t.type,r=t.payload;switch(n){case Ht.START_DRAW_LINE:var c=r,o=c.point,i=c.setting,l=a.getSetting();null!=i&&a.setting(i),a.drawPoint(o),a.startDrawLine(o),a.setting(l);break;case Ht.DRAW_LINE_TO:var u=r,s=u.point,m=u.setting,f=a.getSetting();null!=m&&a.setting(m),a.drawLineTo(s),a.setting(f);break;case Ht.CLEAR_CANVAS:a.clearCanvas();break;case Ht.DRAW_IMAGE:var d=r;a.drawImage(d)}}));return function(){e(),t()}}),[a,i,m]);var R=Object(d.useCallback)((function(){var e=a.getSnapshot();m((function(t){return t.concat(e)}))}),[a]),j=Object(d.useCallback)((function(e){0!==o.length&&i([]),a.drawPoint(e),a.startDrawLine(e),ln(Ht.START_DRAW_LINE,{point:e,setting:a.getSetting()})}),[a,o,i]),C=Object(d.useCallback)((function(e){a.drawLineTo(e),ln(Ht.DRAW_LINE_TO,{point:e,setting:a.getSetting()})}),[a]),N=Object(d.useCallback)((function(){R(),a.clearCanvas(),ln(Ht.CLEAR_CANVAS,{newestDrawing:a.getSnapshot()})}),[a,R]),_=Object(d.useCallback)((function(){if(0!==s.length){var e=s.pop();a.drawImage(e),m(Object(kt.a)(s)),i([].concat(Object(kt.a)(o),[a.getSnapshot()])),ln(Ht.DRAW_IMAGE,e,{newestDrawing:e})}}),[s,o,a,m,i]),w=Object(d.useCallback)((function(){if(0!==o.length){var e=o.pop();a.drawImage(e),m([].concat(Object(kt.a)(s),[a.getSnapshot()])),i(Object(kt.a)(o)),ln(Ht.DRAW_IMAGE,e,{newestDrawing:e})}}),[s,o,a,i,m]),I=Object(d.useCallback)((function(e){R();var t=un(e);j(t)}),[R,j]),k=Object(d.useCallback)((function(e){var t=un(e);C(t)}),[C]),T=Object(d.useCallback)((function(){ln(Ht.END_DRAW_LINE,void 0,{newestDrawing:a.getSnapshot()})}),[a]),A=Object(d.useState)(null),x=Object(Ze.a)(A,2),M=x[0],P=x[1];return E.a.createElement("div",null,E.a.createElement("div",{className:"canvas-wrapper"},E.a.createElement("div",{id:"id-canvas",style:{width:375,height:300},onTouchStart:t?I:void 0,onTouchMove:t?k:void 0,onTouchEnd:t?T:void 0})),t?E.a.createElement("div",{ref:function(e){return P(e)},className:"game-canvas-operations"},E.a.createElement(nn,{anchorEl:M,draw:a,penColor:p,setPenColor:function(e){a.penColor=e,h(e)}}),E.a.createElement(cn,{penSize:g,penColor:p,setPenSize:function(e){a.penSize=e,S(e)},anchorEl:M}),E.a.createElement(Be.a,{disabled:0===s.length,onClick:_,style:{flex:"1"},className:"canvas-operation-list-item"},E.a.createElement(Qt.a,{fontSize:"large"})),E.a.createElement(Be.a,{disabled:0===o.length,style:{flex:"1"},onClick:w,className:"canvas-operation-list-item"},E.a.createElement(Xt.a,{fontSize:"large"})),E.a.createElement(Be.a,{style:{flex:"1",color:"#000"},className:"canvas-operation-list-item",onClick:N},E.a.createElement(Kt.a,{fontSize:"large"}))):null)}));var mn=E.a.memo((function(e){var t=e.isSelfPlaying,n=e.currentGame,a=Object(d.useState)(n.playInfo.time),r=Object(Ze.a)(a,2),c=r[0],o=r[1];return Object(d.useEffect)((function(){var e=he.on(It.TIMEOUT,(function(e){o(e)}));return function(){e()}}),[o]),E.a.createElement(st.a,{style:{boxShadow:"none"},position:"static"},E.a.createElement(mt.a,null,E.a.createElement(ft.a,{variant:"h6"},t?"\u8bf7\u753b ".concat(n.playInfo.keyword.raw):"".concat(n.playInfo.keyword.raw.length,"\u4e2a\u5b57 ").concat(n.playInfo.keyword.hint)),E.a.createElement(qe.a,null,"\u5269\u4f59:",c,"\u79d2")))})),fn=function(e){return{currentGame:e.room.currentGame,user:e.user.user}};var dn=n(102),En=n(197),vn=Object(dn.a)({palette:{primary:{main:"#ff9800"}}});var pn=[{path:"/",component:function(e){var t=e.children,n=Object(X.g)(Wt,X.e),a=n.user,r=n.pathname,c=Object(X.f)();return Object(d.useEffect)((function(){if(null!=a){if(a.isGaming&&null==a.currentRoomId&&console.error("\u7528\u6237\u6b63\u5728\u6e38\u620f\u4e2d","\u4f46\u627e\u4e0d\u5230\u623f\u95f4\u53f7"),a.isGaming&&null!=a.currentRoomId){var e="/game/".concat(a.currentRoomId);r!==e&&c(Object(Te.f)(e))}else if(null!=a.currentRoomId){var t="/room/".concat(a.currentRoomId);r!==t&&c(Object(Te.f)(t))}}else c(s.login())}),[a,r,c]),null==a?E.a.createElement(We,null):t},children:[{path:"/",component:function(e){var t=e.children;return E.a.createElement(E.a.Fragment,null,E.a.createElement("div",{className:"basic-layout"},t),E.a.createElement(St,null))},children:[{path:"/",component:function(e){var t=e.children;return E.a.createElement(En.a,{theme:vn},t)},children:[{path:"/create-room",component:function(){pt("\u521b\u5efa\u623f\u95f4");var e=Object(X.g)(wt,X.e).username,t="".concat(e,"\u7684\u623f\u95f4"),n=Object(d.useState)(t),a=Object(Ze.a)(n,2),r=a[0],c=a[1],o=Object(d.useState)(_e.PUBLIC),i=Object(Ze.a)(o,2),l=i[0],u=i[1],s=Object(X.f)();Object(d.useEffect)((function(){s(m.getNumberOfOnlinePlayer())}),[s]);var v=Object(d.useCallback)((function(){s(f.createRoom(r,l))}),[r,l,s]),p=Object(d.useState)(!0),h=Object(Ze.a)(p,2),O=h[0],b=h[1],g=Object(d.useCallback)((function(e){b(!1),c(e.target.value)}),[c,b]);return E.a.createElement("div",{className:"view-room-creator"},E.a.createElement("div",{className:"view-room-creator-header"},E.a.createElement(st.a,{style:{boxShadow:"none"},position:"static"},E.a.createElement(mt.a,null,E.a.createElement(qe.a,{onClick:function(){return s(Object(Te.c)())},color:"inherit"},E.a.createElement(_t.a,null),"\u8fd4\u56de"),E.a.createElement(ft.a,{style:{flex:1,textAlign:"center"}},"\u521b\u5efa\u623f\u95f4")))),E.a.createElement("div",{className:"view-room-creator-main"},E.a.createElement(yt.a,{fullWidth:!0},E.a.createElement(He.a,null,E.a.createElement(jt.a,null,E.a.createElement(ot.a,{label:"\u623f\u95f4\u540d",fullWidth:!0,placeholder:"\u8bf7\u8f93\u5165\u623f\u95f4\u540d\u5b57",type:"text",variant:"outlined",value:O?t:r,onChange:g})),E.a.createElement(Nt.a,{value:l,onChange:function(e){return u(e.target.value)},name:"room-type"},E.a.createElement(jt.a,{button:!0,onClick:function(){return u(_e.PUBLIC)}},E.a.createElement(Rt.a,{value:_e.PUBLIC,control:E.a.createElement(Ct.a,{color:"primary"}),label:"\u516c\u5f00",labelPlacement:"end"})),E.a.createElement(jt.a,{button:!0,onClick:function(){return u(_e.PRIVATE)}},E.a.createElement(Rt.a,{value:_e.PRIVATE,control:E.a.createElement(Ct.a,{color:"primary"}),label:"\u79c1\u4eba(\u4e0d\u663e\u793a\u5728\u6e38\u620f\u5927\u5385)",labelPlacement:"end"}))),E.a.createElement(jt.a,null,E.a.createElement(qe.a,{onClick:v,fullWidth:!0,variant:"outlined"},"\u521b\u5efa\u623f\u95f4"))))))}},{path:"/game/:id",component:function(){var e=Object(X.g)(fn,X.e),t=e.currentGame,n=e.user,a=Object(X.f)();Object(d.useEffect)((function(){null==t&&a(f.getGame())}),[t,a]);var r=Object(d.useState)([]),c=Object(Ze.a)(r,2),i=c[0],u=c[1],s=Object(d.useState)(!1),m=Object(Ze.a)(s,2),v=m[0],p=m[1];Object(d.useEffect)((function(){var e=he.on(It.GAME_CHATTING,(function(e){u((function(t){return[e].concat(Object(kt.a)(t))}))})),t=he.on(It.PLAY_OVER,(function(){p(!0)})),n=he.on(It.GAME_OVER,(function(e){var t=e.user;a(o.createSetIsGaming(t.isGaming))})),r=he.on(It.REFRESH_GAME,(function(e){var t=e.game;a(l.createSetCurrentGame(t))})),c=he.on(It.CHANGE_DRAWER,(function(e){var t=e.game;a(l.createSetCurrentGame(t)),p(!1)}));return function(){e(),n(),r(),c(),t()}}),[p,u,a]);var h=Object(d.useMemo)((function(){return null!=n&&null!=t&&n.id===t.playInfo.currentPlayer.id}),[n,t]);return null==t||null==n?E.a.createElement(We,null):E.a.createElement(E.a.Fragment,null,E.a.createElement(nt.a,{open:v,onClose:function(){return p(!1)}},E.a.createElement(at.a,null,"\u6b63\u786e\u7b54\u6848\u662f: ",t.playInfo.keyword.raw),E.a.createElement(rt.a,null,h?E.a.createElement(qe.a,{variant:"outlined",disabled:!0},"\u4fdd\u5b58\u6b64\u6b21\u753b\u4f5c\u5230\u672c\u5730"):null)),E.a.createElement("div",{className:"view-game"},E.a.createElement(mn,{isSelfPlaying:h,currentGame:t}),E.a.createElement("div",{className:"view-game-main"},E.a.createElement(sn,{isSelfPlaying:h,initialDrawing:t.newestDrawing}),h?null:E.a.createElement(Vt,{wsClient:he}),E.a.createElement("div",{className:"user-list"},t.users.map((function(e){return E.a.createElement("div",{key:e.id,className:"user-list-user"},E.a.createElement(Bt,{avatar:e.username[0]},e.id===n.id?E.a.createElement(Bt.AvatarStatus,{text:"\u6211"}):null,E.a.createElement(Bt.AvatarStatus,{text:"".concat(t.userScores[e.id],"\u5206")}),e.id===t.playInfo.currentPlayer.id?E.a.createElement(Bt.AvatarStatus,{text:"\u6b63\u5728\u7ed8\u753b"}):null,e.isOnline?null:E.a.createElement(Bt.AvatarStatus,{text:"\u5df2\u79bb\u7ebf"})),E.a.createElement("div",{className:"username"},e.username))}))),E.a.createElement("div",{className:"game-message-list"},i.map((function(e){return E.a.createElement("div",{key:e.id,className:"game-message-list-item"},e.speaker.name,": ",e.content)})),E.a.createElement("div",{className:"game-message-list-item"},"\u8f66\u7b14\u5200 \u731c\uff1a\u6c7d\u8f66")))))}},{path:"/room/:roomId",component:function(){pt("\u623f\u95f4");var e=Object(X.g)(Ft,X.e),t=e.currentRoom,n=e.isReady,a=Object(K.f)().roomId,r=parseInt(a,10),c=Object(X.f)(),i=Object(d.useCallback)((function(){c(f.makeGameIsReady(!n))}),[n,c]);return Object(d.useEffect)((function(){var e=he.on(It.REFRESH_ROOM,(function(e,t){var n=t.data;c(l.createSetRoom(n))})),t=he.on(It.START_GAME,(function(e,t){var n=t.data,a=n.user,r=n.game;Object(X.c)((function(){c(l.createSetCurrentGame(r)),c(l.createSetCurrentRoomStatus(Ne.GAMING)),c(o.createSetIsGaming(a.isGaming)),c(o.createSetIsReady(a.isReady))}))}));return function(){e(),t()}}),[r,c]),Object(d.useEffect)((function(){Number.isNaN(r)||c(f.enterRoom(r))}),[c,r]),null==a?E.a.createElement(K.a,{to:"/"}):null==t?E.a.createElement(We,null):E.a.createElement("div",{className:"view-playing-room"},E.a.createElement("div",{className:"view-playing-room-header"},E.a.createElement(Dt,null)),E.a.createElement("div",{className:"view-playing-room-main"},E.a.createElement(Lt,{users:t.users}),E.a.createElement("div",{className:"start-game-button-wrapper"},E.a.createElement(qe.a,{onClick:i,className:"start-game-button",variant:"outlined",fullWidth:!0},n?"\u53d6\u6d88\u51c6\u5907":"\u51c6\u5907")),E.a.createElement("div",{className:"room-message-wrapper"},E.a.createElement(xt,null))))}},{path:"/",component:function(){pt("\u6e38\u620f\u5927\u5385");var e=Object(X.g)(ht,X.e),t=e.numberOfOnlinePlayer,n=e.user,a=Object(X.f)();return Object(d.useEffect)((function(){a(m.getNumberOfOnlinePlayer())}),[a]),null==n?E.a.createElement(We,null):E.a.createElement("div",{className:"view-game-lobby"},E.a.createElement("div",{className:"view-game-lobby-header"},E.a.createElement(vt,null)),E.a.createElement("div",{className:"view-game-lobby-main"},E.a.createElement(ut,null),E.a.createElement("div",{className:"room-list-wrapper"},E.a.createElement(Qe,null))),E.a.createElement("div",{className:"view-game-lobby-footer"},E.a.createElement("div",{className:"number-of-online-player"},"\u5f53\u524d\u5728\u7ebf\u4eba\u6570: ",t)))}}]}]}]}];var hn=function(){return function e(t){return null==t||0===t.length?null:E.a.createElement(K.d,null,t.map((function(t,n){var a=t.layout,r=t.component;return null==a?E.a.createElement(K.b,{key:n,path:t.path,render:function(){return E.a.createElement(r,null,e(t.children))}}):E.a.createElement(K.b,{key:n,path:t.path,render:function(){return E.a.createElement(a,null,E.a.createElement(r,null,e(t.children)))}})})))}(pn)},On=V?Object(h.e)(z(Y),J(Object(h.a)(Object(b.a)(Y),g.a))):Object(h.e)(z(Y),Object(h.d)(Object(h.a)(Object(b.a)(Y),g.a)));function bn(){var e=Object(X.f)();return Object(d.useEffect)((function(){var t=he.on("refreshPlayerInfo",(function(t){var n=t;e(o.createSetUser(n))}));return function(){t()}}),[e]),E.a.createElement("div",{style:{},className:"App"},E.a.createElement(y.a,{history:Y},E.a.createElement(hn,null)))}var gn=function(){return E.a.createElement(X.a,{store:On},E.a.createElement(bn,null))};n(139);p.a.render(E.a.createElement(gn),document.getElementById("root")),document.querySelector("body").addEventListener("touchmove",(function(e){e.preventDefault()}),{passive:!1})}},[[113,1,2]]]);
//# sourceMappingURL=main.dace2c70.chunk.js.map