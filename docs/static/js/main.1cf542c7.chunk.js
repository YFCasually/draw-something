(this["webpackJsonpdraw-something-client"]=this["webpackJsonpdraw-something-client"]||[]).push([[0],{113:function(e,t,n){e.exports=n(144)},114:function(e,t,n){},125:function(e,t,n){},129:function(e,t,n){},130:function(e,t,n){},131:function(e,t,n){},132:function(e,t,n){},133:function(e,t,n){},134:function(e,t,n){},135:function(e,t,n){},136:function(e,t,n){},137:function(e,t,n){},138:function(e,t,n){},139:function(e,t,n){},140:function(e,t,n){},141:function(e,t,n){},142:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"SET_USERNAME",(function(){return j})),n.d(a,"SET_USER",(function(){return C})),n.d(a,"SET_USER_CURRENT_ROOM_ID",(function(){return _})),n.d(a,"SET_IS_READY",(function(){return N})),n.d(a,"SET_IS_GAMING",(function(){return w}));var r={};n.r(r),n.d(r,"SET_NUMBER_OF_ONLINE_PLAYER",(function(){return I})),n.d(r,"ADD_NOTIFICATION",(function(){return T})),n.d(r,"SHIFT_NOTIFICATION",(function(){return k}));var c={};n.r(c),n.d(c,"SET_ROOM_LIST",(function(){return A})),n.d(c,"SET_CURRENT_ROOM_USERS",(function(){return x})),n.d(c,"SET_CURRENT_ROOM_STATUS",(function(){return M})),n.d(c,"SET_CURRENT_GAME",(function(){return G})),n.d(c,"SET_CURRENT_GAME_USERS",(function(){return U})),n.d(c,"SET_ROOM",(function(){return P}));var o={};n.r(o),n.d(o,"createSetUsername",(function(){return ae})),n.d(o,"createSetUser",(function(){return re})),n.d(o,"createSetIsGaming",(function(){return ce})),n.d(o,"createSetUserCurrentRoomId",(function(){return oe})),n.d(o,"createSetIsReady",(function(){return ie}));var i={};n.r(i),n.d(i,"createSetNumberOfOnlinePlayer",(function(){return le})),n.d(i,"createAddNotification",(function(){return ue})),n.d(i,"createShiftNotification",(function(){return se}));var l={};n.r(l),n.d(l,"createSetRoomList",(function(){return me})),n.d(l,"createSetCurrentRoomUsers",(function(){return fe})),n.d(l,"createSetRoom",(function(){return de})),n.d(l,"createSetCurrentGame",(function(){return Ee})),n.d(l,"createSetCurrentRoomStatus",(function(){return ve})),n.d(l,"createSetCurrentGameUsers",(function(){return pe}));var u={};n.r(u),n.d(u,"login",(function(){return je})),n.d(u,"changeUsername",(function(){return _e}));var s={};n.r(s),n.d(s,"login",(function(){return Ie})),n.d(s,"changeUsername",(function(){return Te}));var m={};n.r(m),n.d(m,"getNumberOfOnlinePlayer",(function(){return ke}));var f={};n.r(f),n.d(f,"getRoomList",(function(){return Ge})),n.d(f,"enterRoom",(function(){return Pe})),n.d(f,"leaveRoom",(function(){return De})),n.d(f,"createRoom",(function(){return Le})),n.d(f,"sendChatMessage",(function(){return Fe})),n.d(f,"makeGameIsReady",(function(){return We})),n.d(f,"getGame",(function(){return ze}));n(114);var d=n(0),E=n.n(d),v=n(11),p=n.n(v),h=n(28),O=n(33),b=n(87),g=n(68),S=n(9),y=n(29),R=n(43),j="SET_USERNAME",C="SET_USER",_="SET_USER_CURRENT_ROOM_ID",N="SET_IS_READY",w="SET_IS_GAMING",I="SET_NUMBER_OF_ONLINE_PLAYER",T="ADD_NOTIFICATION",k="REMOVE_NOTIFICATION",A="SET_ROOM_LIST",x="SET_CURRENT_ROOM_USERS",M="SET_CURRENT_ROOM_STATUS",G="SET_CURRENT_GAME",U="SET_CURRENT_GAME_USERS",P="SET_ROOM",D={isLogining:!1,user:null,isRegistering:!1};var L={numberOfOnlinePlayer:1,notifications:[]};var F={roomList:[],currentRoom:null,currentGame:null};function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var z={user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;return Object(R.a)(e,(function(e){var n=t.type,r=t.payload;switch(n){case a.SET_USERNAME:null!=e.user&&(e.user.username=r);break;case a.SET_USER:e.user=r;break;case a.SET_IS_GAMING:null!=e.user&&(e.user.isGaming=r);break;case a.SET_IS_READY:null!=e.user&&(e.user.isReady=r);break;case a.SET_USER_CURRENT_ROOM_ID:null!=e.user&&(e.user.currentRoomId=r)}}))},global:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;return Object(R.a)(e,(function(e){var n=t.type,a=t.payload;switch(n){case r.SET_NUMBER_OF_ONLINE_PLAYER:e.numberOfOnlinePlayer=a;break;case r.ADD_NOTIFICATION:e.notifications.push(a);break;case r.SHIFT_NOTIFICATION:e.notifications.shift()}}))},room:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;return Object(R.a)(e,(function(e){var n=t.type,a=t.payload;switch(n){case c.SET_ROOM_LIST:e.roomList=a;break;case c.SET_CURRENT_ROOM_USERS:null!=e.currentRoom&&(e.currentRoom.users=a);break;case c.SET_ROOM:e.currentRoom=a;break;case c.SET_CURRENT_GAME:e.currentGame=a;break;case c.SET_CURRENT_GAME_USERS:void 0!=e.currentGame&&(e.currentGame.users=a);break;case c.SET_CURRENT_ROOM_STATUS:null!=e.currentRoom&&(e.currentRoom.status=a)}}))}},q=function(e){return Object(h.c)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(n,!0).forEach((function(t){Object(S.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({router:Object(y.b)(e)},z))};function B(){var e=localStorage.getItem("__token");if(null!=e)return e}function H(e){localStorage.setItem("__token",e)}function V(e){return function(t){13===t.keyCode&&e()}}var Y=["localhost","127.0.0.1","192.168"].some((function(e){return window.location.origin.includes(e)})),J=Object(O.a)(),K=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||h.d;var X=n(6),Q=n(64);n(125);function Z(e){var t=Object(d.useRef)("");Object(d.useEffect)((function(){return t.current=document.title,document.title=e,function(){document.title=t.current}}),[e])}var $=n(25),ee=n(90),te=n.n(ee),ne=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",a=arguments.length>2?arguments[2]:void 0;Object($.a)(this,e),this.title=t,this.type=n,this.detail=a,this.id=te()(),this.createAt=Date.now()};function ae(e){return{type:a.SET_USERNAME,payload:e}}function re(e){return{type:a.SET_USER,payload:e}}function ce(e){return{type:a.SET_IS_GAMING,payload:e}}function oe(e){return{type:a.SET_USER_CURRENT_ROOM_ID,payload:e}}function ie(e){return{type:a.SET_IS_READY,payload:e}}function le(e){return{type:r.SET_NUMBER_OF_ONLINE_PLAYER,payload:e}}var ue=function(e){return{type:r.ADD_NOTIFICATION,payload:e}},se=function(){return{type:r.SHIFT_NOTIFICATION}};function me(e){return{type:c.SET_ROOM_LIST,payload:e}}function fe(e){return{type:c.SET_CURRENT_ROOM_USERS,payload:e}}function de(e){return{type:c.SET_ROOM,payload:e}}function Ee(e){return{type:c.SET_CURRENT_GAME,payload:e}}function ve(e){return{type:c.SET_CURRENT_ROOM_STATUS,payload:e}}function pe(e){return{type:c.SET_CURRENT_GAME_USERS,payload:e}}var he=n(13),Oe=n.n(he),be=n(21),ge=n(24),Se=n(1),ye=function(){function e(t,n,a){Object($.a)(this,e),this.data=t,this.handler=n,this.desc=a,this.id=void 0,this.createAt=Date.now(),this.id="".concat(this.handler,"-").concat(Date.now())}return Object(ge.a)(e,[{key:"toJSON",value:function(){return Object(Se.a)({},this)}}]),e}();var Re=new(function(){function e(t){Object($.a)(this,e),this.options=t,this.isConnected=!1,this.ws=void 0,this.messageCache=[],this.eventMap=new Map,this.ws=new window.WebSocket(this.options.addr),this.init()}return Object(ge.a)(e,[{key:"init",value:function(){var e=this;this.ws.onopen=function(t){e.isConnected=!0,"function"===typeof e.options.onopen&&e.options.onopen(t),e.sendMessageFromCache()},this.ws.onclose=function(t){e.isConnected=!1,"function"===typeof e.options.onclose&&(e.options.onclose(t),Y&&console.log("\u8fde\u63a5\u65ad\u5f00"))},this.ws.onerror=function(t){"function"===typeof e.options.onerror&&e.options.onerror(t)},this.ws.onmessage=function(t){var n=t.data,a=JSON.parse(n);(void 0===a.trigger||void 0!==a.trigger&&"timeout"!==a.trigger)&&console.log("recive",a),e.emit("message",a),null!=a.requestId&&e.emit(a.requestId,a),null!=a.trigger&&e.emit(a.trigger,a)}}},{key:"sendMessageFromCache",value:function(){var e=this;this.messageCache.forEach((function(t){e.sendMessage(t)})),this.messageCache=[]}},{key:"sendMessage",value:function(e){this.isConnected?(console.log("sendMessage",e),this.ws.send(JSON.stringify(e))):this.messageCache.push(e)}},{key:"request",value:function(e,t){var n=this;return new Promise((function(a,r){try{var c=new ye(t,e);n.on(c.id,(function e(t,o){null==o&&console.error("".concat(c.handler,"-").concat(c.id," \u8fd4\u56de\u6765\u7a7a\u7684message")),null!=o.error&&(n.emit("error",o),r(o.error)),a(o),null!=o.requestId&&n.off(o.requestId,e),Y&&null!=o.requestId&&o.requestId!==c.id&&console.error("reqMsg.id: ".concat(c.id," !== respMsg.requestId\uff1a ").concat(o.requestId))})),n.sendMessage(c)}catch(o){console.error("request\u65f6\u53d1\u751f\u9519\u8bef ".concat(o))}}))}},{key:"on",value:function(e,t){var n=this,a=this.eventMap.get(e);return void 0===a&&(a=[],this.eventMap.set(e,a)),a.push(t),function(){n.off(e,t)}}},{key:"off",value:function(e,t){var n=this.eventMap.get(e);void 0!==n&&(n=n.filter((function(e){return e!==t})),this.eventMap.set(e,n))}},{key:"emit",value:function(e,t){var n=this.eventMap.get(e);void 0!==n&&n.forEach((function(e){return e(t.data,t)}))}}]),e}())({addr:(Y?{addr:"ws://".concat(window.location.hostname,":9421")}:{addr:"ws://101.37.174.138:9421"}).addr});function je(e){return Ce.apply(this,arguments)}function Ce(){return(Ce=Object(be.a)(Oe.a.mark((function e(t){var n;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re.request("login",t);case 2:return n=e.sent.data,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(be.a)(Oe.a.mark((function e(t){var n;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re.request("changeUsername",t);case 2:return n=e.sent.data,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var we={user:u};function Ie(){return function(){var e=Object(be.a)(Oe.a.mark((function e(t){var n,a;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=B(),e.next=3,we.user.login(n);case 3:H((a=e.sent).token),t(o.createSetUser(a));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function Te(e){return function(){var t=Object(be.a)(Oe.a.mark((function t(n){var a;return Oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,we.user.changeUsername(e);case 2:a=t.sent,n(o.createSetUsername(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function ke(){return function(){var e=Object(be.a)(Oe.a.mark((function e(t){var n;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.request("numberOfOnlineUser");case 3:n=e.sent.data,t(i.createSetNumberOfOnlinePlayer(n)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}var Ae,xe,Me=n(19);function Ge(){return function(){var e=Object(be.a)(Oe.a.mark((function e(t){var n,a;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.request("roomList");case 3:n=e.sent,a=n.data,t(l.createSetRoomList(a)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}!function(e){e.WAITING="waiting",e.GAMING="gaming"}(Ae||(Ae={})),function(e){e.PUBLIC="public",e.PRIVATE="private"}(xe||(xe={}));var Ue=!1;function Pe(e){return function(){var t=Object(be.a)(Oe.a.mark((function t(n){var a,r,c,u;return Oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Ue){t.next=2;break}return t.abrupt("return");case 2:return Ue=!0,t.prev=3,t.next=6,Re.request("userEnter",{roomId:e});case 6:a=t.sent,r=a.data,c=r.room,u=r.user,Object(X.c)((function(){n(l.createSetRoom(c)),n(o.createSetUserCurrentRoomId(u.currentRoomId)),n(Object(Me.e)("/room/".concat(c.id)))})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),Object(X.c)((function(){n(Object(Me.e)("/")),n(i.createAddNotification(new ne(t.t0.title,"error")))}));case 14:return t.prev=14,Ue=!1,t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[3,11,14,17]])})));return function(e){return t.apply(this,arguments)}}()}function De(){return function(){var e=Object(be.a)(Oe.a.mark((function e(t,n){var a,r;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n(),null!=(r=a.user.user)&&null!=r.currentRoomId){e.next=3;break}return e.abrupt("return");case 3:try{Re.request("userLeave"),t(o.createSetUserCurrentRoomId(void 0)),t(l.createSetRoom(null)),t(Object(Me.e)("/"))}catch(c){console.error(c)}case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}function Le(e,t){return function(){var n=Object(be.a)(Oe.a.mark((function n(a){var r,c;return Oe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Re.request("createRoom",{name:e,type:t});case 3:r=n.sent,c=r.data,a(Pe(c.id)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.error(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()}function Fe(e){return function(){var t=Object(be.a)(Oe.a.mark((function t(n){return Oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{Re.request("sendChatMessage",{content:e})}catch(n){console.error(n)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function We(e){var t=e?"makeGameReady":"cancelGameReady";return function(){var e=Object(be.a)(Oe.a.mark((function e(n){var a,r,c,i;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.request(t);case 3:a=e.sent,r=a.data,c=r.user,i=r.room,n(l.createSetCurrentRoomUsers(i.users)),n(o.createSetIsReady(c.isReady)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}function ze(){return function(){var e=Object(be.a)(Oe.a.mark((function e(t,n){var a,r,c,o,u;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(),r=a.user.user,e.prev=1,e.next=4,Re.request("getGame");case 4:c=e.sent,o=c.data,u=o.game,t(l.createSetCurrentGame(u)),t(l.createSetCurrentRoomStatus(Ae.GAMING)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),t(i.createAddNotification(new ne(e.t0.title,"error"))),null!=r&&null!=r.currentRoomId?t(Object(Me.f)("/room/".concat(r.currentRoomId))):t(Object(Me.f)("/"));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()}var qe=n(182);function Be(){return E.a.createElement("div",{className:"full-screen-loading",style:{display:"flex",justifyContent:"center",alignItems:"center"}},E.a.createElement(qe.a,null))}var He=n(10),Ve=n(193),Ye=n(194),Je=n(196),Ke=n(195),Xe=n(206),Qe=n(186),Ze=n(187),$e=n(191),et=n(204),tt=n(192),nt=n(91),at=(n(129),function(e){return{user:e.user.user}});function rt(){Y&&console.log("render AccountCard");var e=Object(X.g)(at,X.e).user,t=Object(d.useState)(null!=e?e.username:""),n=Object(He.a)(t,2),a=n[0],r=n[1],c=Object(d.useCallback)((function(e){return r(e.target.value.trim())}),[r]),o=Object(d.useState)(!1),i=Object(He.a)(o,2),l=i[0],u=i[1],m=Object(X.f)(),f=Object(d.useCallback)((function(){return u(!0)}),[u]),v=Object(d.useCallback)((function(){return u(!1)}),[u]),p=Object(d.useCallback)((function(){var t=0===a.trim().length;null==e||t||e.username===a||m(s.changeUsername(a)),t||v()}),[e,a,m,v]);return null==e?E.a.createElement(Be,null):E.a.createElement(E.a.Fragment,null,E.a.createElement(Xe.a,{open:l,onClose:v},E.a.createElement(Qe.a,null,"\u66f4\u6539\u7528\u6237\u540d"),E.a.createElement(Ze.a,null,E.a.createElement(et.a,{fullWidth:!0,type:"text",placeholder:"\u7528\u6237\u540d",value:a,onChange:c})),E.a.createElement($e.a,null,E.a.createElement(tt.a,{disabled:0===a.trim().length,onClick:p},"\u786e\u5b9a"),E.a.createElement(tt.a,{onClick:v},"\u53d6\u6d88"))),E.a.createElement("div",{className:"user-info"},E.a.createElement(Ve.a,null,E.a.createElement(Ye.a,{title:E.a.createElement("span",{style:{color:"#000"}},"\u4f60\u597d\uff0c",e.username,"\uff01"),subheader:"\u767b\u9646\u4e8e".concat((new Date).toLocaleTimeString()),avatar:E.a.createElement(Ke.a,null,e.username[0]),action:E.a.createElement(Je.a,{onClick:f},E.a.createElement(nt.a,null))}))))}n(130);var ct,ot=n(197),it=n(93),lt=n(92),ut=E.a.memo((function(){var e=Object(X.f)(),t=Object(d.useState)(!1),n=Object(He.a)(t,2),a=n[0],r=n[1],c=Object(d.useCallback)((function(){return r(!1)}),[r]),o=Object(d.useState)(""),i=Object(He.a)(o,2),l=i[0],u=i[1],s=Object(d.useCallback)((function(){0!==l.trim().length&&e(Object(Me.e)("/room/".concat(l)))}),[l,e]);return E.a.createElement(E.a.Fragment,null,E.a.createElement(Xe.a,{open:a,onClose:c},E.a.createElement(Qe.a,null,"\u67e5\u627e\u623f\u95f4"),E.a.createElement(Ze.a,null,E.a.createElement(et.a,{fullWidth:!0,type:"text",placeholder:"\u623f\u95f4\u53f7",value:l,onChange:function(e){return u(e.target.value.trim())},onKeyUp:V(s)})),E.a.createElement($e.a,null,E.a.createElement(tt.a,{disabled:0===l.trim().length,onClick:s},"\u786e\u5b9a"),E.a.createElement(tt.a,{onClick:c},"\u53d6\u6d88"))),E.a.createElement(ot.a,{style:{boxShadow:"none"},position:"static"},E.a.createElement("div",{className:"game-lobby-header"},E.a.createElement(Je.a,{color:"default",onClick:function(){return r(!0)}},E.a.createElement(lt.a,null)),E.a.createElement("div",{className:"game-lobby-header-title"},"\u4f60\u753b\u6211\u731c-\u6e38\u620f\u5927\u5385(v0.99)"),E.a.createElement(Je.a,{onClick:function(){return e(Object(Me.e)("/create-room"))}},E.a.createElement(it.a,null)))))})),st=(n(131),n(190)),mt=n(198),ft=n(94),dt=(ct={},Object(S.a)(ct,Ae.GAMING,"\u6e38\u620f\u4e2d"),Object(S.a)(ct,Ae.WAITING,"\u7b49\u5f85\u4e2d..."),ct);function Et(e){var t=e.room,n=Object(X.f)();return E.a.createElement("div",{className:"room-list-room"},E.a.createElement("div",{className:"room-info"},E.a.createElement("div",{className:"room-name"},t.name),E.a.createElement("div",{className:"room-number"},"No.",String(t.id).padStart(5,"0"))),E.a.createElement("div",{className:"room-actions"},E.a.createElement("div",{className:"room-status"},dt[t.status]),E.a.createElement(tt.a,{onClick:function(){return n(Object(Me.e)("/room/".concat(t.id)))},style:{boxShadow:"none"},fullWidth:!0,variant:"contained",color:"primary"},"\u52a0\u5165","(".concat(t.users.length,"/").concat(t.maxPlayerNumber,")"))))}var vt=function(e){return{roomList:e.room.roomList}};function pt(){Y&&console.log("render RoomList");var e=Object(X.g)(vt,X.e).roomList,t=Object(X.f)(),n=Object(d.useCallback)((function(){t(f.getRoomList())}),[t]);return Object(d.useEffect)((function(){n();var e=Re.on("refreshRoomList",(function(e){var n=e;t(l.createSetRoomList(n))}));return function(){e()}}),[t,n]),E.a.createElement("div",{className:"room-list"},E.a.createElement(st.a,{subheader:E.a.createElement(mt.a,null,"\u623f\u95f4\u5217\u8868",E.a.createElement(Je.a,{onClick:n},E.a.createElement(ft.a,null))),className:"room-list"},0===e.length?E.a.createElement("div",{className:"no-room-text"},"\u6682\u65e0\u516c\u5f00\u623f\u95f4"):E.a.createElement("div",{className:"room-list-content"},e.map((function(e){return E.a.createElement(Et,{key:e.id,room:e})})))))}var ht=!1,Ot=function(e){return{numberOfOnlinePlayer:e.global.numberOfOnlinePlayer,user:e.user.user}};n(132);var bt=n(207),gt=n(95),St=function(e){return{notifications:e.global.notifications}},yt=E.a.memo((function(){var e=Object(X.g)(St,X.e).notifications,t=Object(X.f)(),n=Object(d.useCallback)((function(){t(i.createShiftNotification())}),[t]);return E.a.createElement(E.a.Fragment,null,e.map((function(e){return E.a.createElement(bt.a,{key:e.id,anchorOrigin:{vertical:"top",horizontal:"center"},open:!0,onClose:n,autoHideDuration:4e3,action:E.a.createElement(Je.a,{onClick:n,key:"close","aria-label":"close",color:"inherit"},E.a.createElement(gt.a,null)),message:E.a.createElement("span",null,null==e.detail?e.title:"".concat(e.title,"-").concat(e.detail))})})))}));n(133);var Rt=n(188),jt=n(200),Ct=n(199),_t=n(205),Nt=n(208),wt=n(62),It=function(e){var t=e.global.numberOfOnlinePlayer,n=e.user.user;return{numberOfOnlinePlayer:t,username:null==n?"":n.username}};var Tt;n(134);!function(e){e.REFRESH_USER="refreshUser",e.REFRESH_ROOM="refreshRoom",e.REFRESH_ROOM_LIST="refreshRoomList",e.ROOM_CHATTING="roomChatting",e.TIMEOUT="timeout",e.REFRESH_GAME="refreshGame",e.DRAW_ACTION="drawAction",e.START_GAME="startGame",e.GAME_CHATTING="gameChatting",e.CHANGE_DRAWER="changeDrawer",e.ROUND_OVER="roundOver",e.GAME_OVER="gameOver",e.PLAY_OVER="playOver",e.REFRESH_GAME_USERS="refreshGameUsers"}(Tt||(Tt={}));var kt=n(17),At=(n(135),function(e){var t=e.user.user;return{username:null==t?"":t.username,userId:null==t?"":t.id}});var xt,Mt=function(){var e=Object(X.g)(At,X.e).userId,t=Object(d.useState)([]),n=Object(He.a)(t,2),a=n[0],r=n[1];Object(d.useEffect)((function(){return Re.on(Tt.ROOM_CHATTING,(function(e,t){var n=t.data;r((function(e){var t;return(t=[n]).concat.apply(t,Object(kt.a)(e))}))}))}),[r]);var c=Object(d.useState)(""),o=Object(He.a)(c,2),i=o[0],l=o[1],u=Object(X.f)(),s=Object(d.useCallback)((function(){0!==i.trim().length&&(l(""),u(f.sendChatMessage(i)))}),[i,u,l]);return E.a.createElement("div",{className:"room-message"},E.a.createElement("div",{className:"room-message-list"},a.map((function(t){return E.a.createElement(Ct.a,{className:"room-message-list-item",key:t.id},E.a.createElement("div",{className:"room-message-speaker"},E.a.createElement("span",{className:"room-message-speaker-name"},t.speaker.id===e?"\u6211":t.speaker.name,":")),E.a.createElement("div",{className:"room-message-content"},t.content),E.a.createElement("div",{className:"room-message-speaker-time"},new Date(t.timestamp).toLocaleTimeString()))}))),E.a.createElement("div",{className:"room-message-sender"},E.a.createElement(et.a,{variant:"outlined",value:i,onChange:function(e){return l(e.target.value)},onKeyUp:V(s),fullWidth:!0}),"\xa0",E.a.createElement(tt.a,{onClick:s,variant:"text"},"\u53d1\u9001")))},Gt=n(201),Ut=n(48),Pt=function(e){var t=e.room.currentRoom;return{roomId:t?t.id:-1,roomName:t?t.name:"",roomType:t?t.type:xe.PUBLIC}},Dt=(xt={},Object(S.a)(xt,xe.PRIVATE,"(\u79c1\u4eba)"),Object(S.a)(xt,xe.PUBLIC,""),xt),Lt=E.a.memo((function(){Z("\u623f\u95f4");var e=Object(X.g)(Pt,X.e),t=e.roomName,n=e.roomType,a=e.roomId,r=Object(X.f)();return E.a.createElement(ot.a,{style:{boxShadow:"none"},position:"static"},E.a.createElement(Gt.a,null,E.a.createElement(tt.a,{onClick:function(){console.log("cliuck"),r(f.leaveRoom())},color:"inherit"},E.a.createElement(wt.a,null),"\u79bb\u5f00\u623f\u95f4"),E.a.createElement(Ut.a,{style:{flex:1,textAlign:"center"}},t,Dt[n]),E.a.createElement(tt.a,{color:"inherit"},"\u623f\u95f4\u53f7: ",String(a).padStart(5,"0"))))})),Ft=(n(136),n(202));n(137);function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(n,!0).forEach((function(t){Object(S.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qt(e){var t=e.text,n=e.bgColor;return E.a.createElement("div",{style:{backgroundColor:n||"blue"},className:"user-avatar-status"},t)}function Bt(e){var t=e.children,n=e.avatar,a=e.style;return E.a.createElement("div",{style:{height:"18vw",width:"18vw"},className:"user-avatar-wrapper"},t,E.a.createElement("div",{style:zt({backgroundColor:Ft.a[500]},a),className:"user-avatar"},n))}E.a.createElement(qt),Bt.AvatarStatus=qt;var Ht=Bt,Vt=new Array(8).fill(null),Yt=function(e){var t=e.user.user;return{userId:t?t.id:""}},Jt=E.a.memo((function(e){var t=e.users,n=Object(X.g)(Yt,X.e).userId;return E.a.createElement("div",{className:"user-list"},Vt.map((function(e,a){if(a<t.length){var r=t[a];return E.a.createElement("div",{key:r.id,className:"user-list-user"},E.a.createElement(Ht,{avatar:r.username[0]},r.id===n?E.a.createElement(Ht.AvatarStatus,{text:"\u6211"}):null,r&&0===a?E.a.createElement(Ht.AvatarStatus,{text:"\u623f\u4e3b"}):null,r.isOnLine?null:E.a.createElement(Ht.AvatarStatus,{bgColor:"grey",text:"\u5df2\u79bb\u7ebf"}),r.isReady?E.a.createElement(Ht.AvatarStatus,{bgColor:"green",text:"\u5df2\u51c6\u5907"}):null),E.a.createElement("div",{className:"user-list-item-username"},r.username))}return E.a.createElement("div",{key:a,className:"user-list-user"},E.a.createElement(Ht,{style:{backgroundColor:"#fff",color:"#000"},avatar:"\u7a7a"}),E.a.createElement("div",{className:"user-list-item-username"},"\u7b49\u5f85\u52a0\u5165"))})))})),Kt=function(e){var t=e.room.currentRoom,n=e.user.user;return{currentRoom:t,isReady:null!=n&&n.isReady}};var Xt=function(e){return{user:e.user.user,pathname:e.router.location.pathname}};n(138),n(139);var Qt,Zt=function(e){var t=e.wsClient,n=Object(d.useState)(""),a=Object(He.a)(n,2),r=a[0],c=a[1],o=Object(d.useCallback)((function(){if(0!==r.trim().length){var e=new ye(r,"guessAnswer");t.sendMessage(e),c("")}}),[r,t,c]),i=Object(d.useCallback)(V(o),[o]);return E.a.createElement("div",{className:"answer-input-box"},E.a.createElement(et.a,{onKeyUp:i,value:r,onChange:function(e){return c(e.target.value.trim())},placeholder:"\u8f93\u5165\u4f60\u731c\u6d4b\u7684\u7b54\u6848",className:"answer-input",variant:"outlined",type:"text"}),E.a.createElement(tt.a,{variant:"outlined",onClick:o},"\u53d1\u9001"))},$t=(n(140),function(){function e(t,n){Object($.a)(this,e),this.ctx=void 0,this.canvasEl=void 0,this.canvasEl=null==t?document.createElement("canvas"):t,this.ctx=this.canvasEl.getContext("2d"),this.init(),null!=n&&(null!=n.penColor&&this.setPenColor(n.penColor),null!=n.penSize&&this.setPenSize(n.penSize))}return Object(ge.a)(e,[{key:"penColor",get:function(){return this.ctx.strokeStyle},set:function(e){this.ctx.strokeStyle=e,this.ctx.fillStyle=e}},{key:"penSize",get:function(){return this.ctx.lineWidth},set:function(e){this.ctx.lineWidth=e}}]),Object(ge.a)(e,[{key:"init",value:function(){this.ctx.fillStyle=this.penColor,this.ctx.strokeStyle=this.penColor,this.ctx.lineWidth=this.penSize}},{key:"getSetting",value:function(){return{penSize:this.penSize,penColor:this.penColor}}},{key:"setting",value:function(e){null!=e.penColor&&(this.penColor=e.penColor),null!=e.penSize&&(this.penSize=e.penSize)}},{key:"drawImage",value:function(e){var t=this;if("string"===typeof e){var n=new Image;n.onload=function(){t.clearCanvas(),t.drawImage(n)},n.src=e}else this.ctx.drawImage(e,0,0)}},{key:"drawPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.penSize/2,n=this.ctx;console.log("drawPoint","r",t,"lineWidth",this.ctx.lineWidth),n.beginPath(),n.arc(e.x,e.y,t,0,2*Math.PI),n.fill(),n.closePath()}},{key:"getSnapshot",value:function(){return this.canvasEl.toDataURL("image/jpeg",1)}},{key:"startDrawLine",value:function(e){var t=e,n=this.ctx;n.beginPath(),n.moveTo(t.x,t.y)}},{key:"drawLineTo",value:function(e){var t=this.ctx;t.lineTo(e.x,e.y),t.stroke()}},{key:"mount",value:function(e){var t=document.querySelector(e);if(null==t)throw new Error("\u65e0\u6cd5\u901a\u8fc7 ".concat(e," \u627e\u5230\u76f8\u5e94\u7684\u5143\u7d20\uff0c\u8bf7\u786e\u5b9a\u9009\u62e9\u5668\u4e66\u5199\u6b63\u786e\uff0c\u6216\u5143\u7d20\u786e\u5b9e\u5b58\u5728"));t.append(this.canvasEl),this.canvasEl.height=t.clientHeight,this.canvasEl.width=t.clientWidth,this.clearCanvas()}},{key:"clearCanvas",value:function(){var e=this.ctx.fillStyle;this.ctx.fillStyle="#fff",this.ctx.clearRect(0,0,this.canvasEl.width,this.canvasEl.height),this.ctx.fillRect(0,0,this.canvasEl.width,this.canvasEl.height),this.ctx.fillStyle=e}},{key:"setOptions",value:function(e){null!=e.penColor&&this.setPenColor(e.penColor),null!=e.penSize&&this.setPenSize(e.penSize)}},{key:"getOptions",value:function(){return{penColor:this.penColor,penSize:this.penSize}}},{key:"setPenSize",value:function(e){this.ctx.lineWidth=e}},{key:"setPenColor",value:function(e){this.ctx.strokeStyle=e,this.ctx.fillStyle=e}}]),e}()),en=n(99),tn=n(100),nn=n(98);!function(e){e.START_DRAW_LINE="startDrawLine",e.DRAW_LINE_TO="drawLineTo",e.DRAW_IMAGE="drawImage"}(Qt||(Qt={}));var an=function e(t,n,a){Object($.a)(this,e),this.type=t,this.payload=n,this.ignore=void 0,Object.assign(this,a)};an.Type=Qt;var rn=n(189),cn=n(96),on=n(97),ln=["#000","#F44336","#E91E63","#9C27B0","#2196F3","#48C6FF","#4CAF50","#8BC34A","#FFEB3B","#FFC107","#FF9800","#795548","#607D8B","#666","#999","#BBB","#DDD","#FFF"];function un(e){var t=e.anchorEl,n=e.penColor,a=e.setPenColor,r=Object(d.useState)(!1),c=Object(He.a)(r,2),o=c[0],i=c[1],l=Object(d.useCallback)((function(e){a(e),i(!1)}),[a,i]);return E.a.createElement(E.a.Fragment,null,E.a.createElement(Je.a,{style:{flex:"1"},onClick:function(){return i((function(e){return!e}))},className:"canvas-operation-list-item"},E.a.createElement(cn.a,{style:{color:n},fontSize:"large"})),E.a.createElement(rn.a,{anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},anchorEl:t,onClose:function(){return i(!1)},open:o},E.a.createElement("div",{className:"pen-color-wrapper"},ln.map((function(e){return E.a.createElement(Je.a,{onClick:function(){return l(e)},key:e},E.a.createElement(on.a,{style:{border:"1px solid #000",color:e}}))})))))}var sn=n(209);function mn(e){var t=e.length,n=e.width,a=e.vertical,r=e.color;if(null==t&&(t=24),null==n&&(n=2),null==a&&(a=!1),null==r&&(r="#000"),a){var c=[n,t];t=c[0],n=c[1]}return E.a.createElement("div",{className:"plain-line",style:{height:n,width:t,backgroundColor:r}})}function fn(e){var t=e.anchorEl,n=e.penColor,a=e.penSize,r=e.setPenSize,c=Object(d.useCallback)((function(e,t){r(t)}),[r]),o=Object(d.useState)(!1),i=Object(He.a)(o,2),l=i[0],u=i[1];return E.a.createElement(E.a.Fragment,null,E.a.createElement(Je.a,{style:{flex:"1"},onClick:function(){return u((function(e){return!e}))},className:"canvas-operation-list-item"},E.a.createElement(mn,{color:n,length:30,width:a})),E.a.createElement(rn.a,{anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},anchorEl:null==t?void 0:t,onClose:function(){return u(!1)},open:l},E.a.createElement("div",{className:"pen-size-slider-wrapper"},E.a.createElement(sn.a,{style:{width:"80vw"},value:a,onChange:c,valueLabelDisplay:"auto",step:1,marks:!0,min:1,max:20}))))}function dn(e,t,n){var a=new an(e,t,n),r=new ye(a,Tt.DRAW_ACTION);Re.sendMessage(r)}function En(e){var t=e.touches,n=e.target,a=t[0],r=a.clientX,c=a.clientY;return{x:r-n.offsetLeft,y:c-n.offsetTop}}var vn=E.a.memo((function(e){var t=e.isSelfPlaying,n=e.currentGame,a=Object(d.useRef)(new $t).current,r=Object(d.useState)([]),c=Object(He.a)(r,2),o=c[0],i=c[1],l=Object(d.useState)([]),u=Object(He.a)(l,2),s=u[0],m=u[1],f=Object(d.useState)("#000"),v=Object(He.a)(f,2),p=v[0],h=v[1],O=Object(d.useState)(1),b=Object(He.a)(O,2),g=b[0],S=b[1],y=Object(d.useRef)(!1);Object(d.useLayoutEffect)((function(){!1===y.current&&(a.mount("#id-canvas"),y.current=!0),void 0!==n.newestDrawing&&a.drawImage(n.newestDrawing)}),[a,n]),Object(d.useEffect)((function(){var e=Re.on(Tt.CHANGE_DRAWER,(function(){a.clearCanvas(),i([]),m([])})),t=Re.on(Tt.DRAW_ACTION,(function(e){var t=e,n=t.type,r=t.payload;switch(n){case Qt.START_DRAW_LINE:var c=r,o=c.point,i=c.setting,l=a.getSetting();null!=i&&a.setting(i),a.drawPoint(o),a.startDrawLine(o),a.setting(l);break;case Qt.DRAW_LINE_TO:var u=r,s=u.point,m=u.setting,f=a.getSetting();null!=m&&a.setting(m),a.drawLineTo(s),a.setting(f);break;case Qt.DRAW_IMAGE:var d=r;a.drawImage(d)}}));return function(){e(),t()}}),[a,i,m]);var R=Object(d.useCallback)((function(){var e=a.getSnapshot();m((function(t){return t.concat(e)}))}),[a]),j=Object(d.useCallback)((function(e){0!==o.length&&i([]),a.drawPoint(e),a.startDrawLine(e),dn(Qt.START_DRAW_LINE,{point:e,setting:a.getSetting()})}),[a,o,i]),C=Object(d.useCallback)((function(e){a.drawLineTo(e),dn(Qt.DRAW_LINE_TO,{point:e,setting:a.getSetting()})}),[a]),_=Object(d.useCallback)((function(){R(),a.clearCanvas(),dn(Qt.DRAW_IMAGE,a.getSnapshot())}),[a,R]),N=Object(d.useCallback)((function(){if(0!==s.length){var e=s.pop();a.drawImage(e),m(Object(kt.a)(s)),i([].concat(Object(kt.a)(o),[a.getSnapshot()])),dn(Qt.DRAW_IMAGE,e)}}),[s,o,a,m,i]),w=Object(d.useCallback)((function(){if(0!==o.length){var e=o.pop();a.drawImage(e),m([].concat(Object(kt.a)(s),[a.getSnapshot()])),i(Object(kt.a)(o)),dn(Qt.DRAW_IMAGE,e)}}),[s,o,a,i,m]),I=Object(d.useCallback)((function(e){R();var t=En(e);j(t)}),[R,j]),T=Object(d.useCallback)(function(e,t){var n=-1;return function(){var a=Date.now();a-n>=t&&(n=a,e.apply(void 0,arguments))}}((function(e){var t=En(e);C(t)}),34),[C]),k=Object(d.useCallback)((function(){dn(Qt.DRAW_IMAGE,a.getSnapshot())}),[a]),A=Object(d.useState)(null),x=Object(He.a)(A,2),M=x[0],G=x[1];return E.a.createElement("div",null,E.a.createElement("div",{className:"canvas-wrapper"},E.a.createElement("div",{id:"id-canvas",style:{width:375,height:300},onTouchStart:t?I:void 0,onTouchMove:t?T:void 0,onTouchEnd:t?k:void 0})),t?E.a.createElement("div",{ref:function(e){return G(e)},className:"game-canvas-operations"},E.a.createElement(un,{anchorEl:M,draw:a,penColor:p,setPenColor:function(e){a.penColor=e,h(e)}}),E.a.createElement(fn,{penSize:g,penColor:p,setPenSize:function(e){a.penSize=e,S(e)},anchorEl:M}),E.a.createElement(Je.a,{disabled:0===s.length,onClick:N,style:{flex:"1"},className:"canvas-operation-list-item"},E.a.createElement(nn.a,{fontSize:"large"})),E.a.createElement(Je.a,{disabled:0===o.length,style:{flex:"1"},onClick:w,className:"canvas-operation-list-item"},E.a.createElement(en.a,{fontSize:"large"})),E.a.createElement(Je.a,{style:{flex:"1",color:"#000"},className:"canvas-operation-list-item",onClick:_},E.a.createElement(tn.a,{fontSize:"large"}))):null)}));n(141);var pn=E.a.memo((function(){var e=Object(d.useState)([]),t=Object(He.a)(e,2),n=t[0],a=t[1];return Object(d.useEffect)((function(){var e=Re.on(Tt.GAME_CHATTING,(function(e){a((function(t){return[e].concat(Object(kt.a)(t))}))}));return function(){e()}}),[]),E.a.createElement("div",{className:"game-chatting-message-list"},n.map((function(e){return E.a.createElement("div",{key:e.id,className:"game-chatting-message-list-item"},e.speaker.name,": ",e.content)})))}));n(142);var hn=E.a.memo((function(e){var t=e.isSelfPlaying,n=e.currentGame,a=Object(d.useState)(n.playInfo.time),r=Object(He.a)(a,2),c=r[0],o=r[1];Object(d.useEffect)((function(){var e=Re.on(Tt.TIMEOUT,(function(e){o(e)}));return function(){e()}}),[o]);var i=n.playInfo;return E.a.createElement(ot.a,{style:{boxShadow:"none"},position:"static"},E.a.createElement("div",{className:"game-header"},E.a.createElement("span",{className:"game-header-hint"},t?"\u8bf7\u753b ".concat(i.keyword.raw):"".concat(i.keyword.raw.length,"\u4e2a\u5b57 ").concat(i.keyword.hint)),E.a.createElement("span",{className:"game-time-so-far"},"\u5269\u4f59:",c,"\u79d2")))}));n(143);var On=E.a.memo((function(e){var t=e.currentGame,n=e.user;return E.a.createElement("div",{className:"game-user-list"},t.users.map((function(e){return E.a.createElement("div",{key:e.id,className:"user-list-user"},E.a.createElement(Ht,{avatar:e.username[0]},e.id===n.id?E.a.createElement(Ht.AvatarStatus,{text:"\u6211"}):null,E.a.createElement(Ht.AvatarStatus,{text:"".concat(t.userScores[e.id],"\u5206")}),e.id===t.playInfo.drawer.id?E.a.createElement(Ht.AvatarStatus,{text:"\u6b63\u5728\u7ed8\u753b"}):null,e.isOnLine?null:E.a.createElement(Ht.AvatarStatus,{bgColor:"grey",text:"\u5df2\u79bb\u7ebf"})),E.a.createElement("div",{className:"username"},e.username))})))})),bn=function(e){return{currentGame:e.room.currentGame,user:e.user.user}};var gn=n(101),Sn=n(203),yn=Object(gn.a)({palette:{primary:{light:Ft.a[500],main:Ft.a[500],dark:Ft.a[500]}}});var Rn=[{path:"/",component:function(e){var t=e.children,n=Object(X.g)(Xt,X.e),a=n.user,r=n.pathname,c=Object(X.f)();return Object(d.useEffect)((function(){if(null!=a){if(a.isGaming&&null==a.currentRoomId&&console.error("\u7528\u6237\u6b63\u5728\u6e38\u620f\u4e2d","\u4f46\u627e\u4e0d\u5230\u623f\u95f4\u53f7"),a.isGaming&&null!=a.currentRoomId){var e="/game/".concat(a.currentRoomId);r!==e&&c(Object(Me.f)(e))}else if(null!=a.currentRoomId){var t="/room/".concat(a.currentRoomId);r!==t&&c(Object(Me.f)(t))}}else c(s.login())}),[a,r,c]),null==a?E.a.createElement(Be,null):t},children:[{path:"/",component:function(e){var t=e.children;return E.a.createElement(E.a.Fragment,null,E.a.createElement("div",{className:"basic-layout"},t),E.a.createElement(yt,null))},children:[{path:"/",component:function(e){var t=e.children;return E.a.createElement(Sn.a,{theme:yn},t)},children:[{path:"/create-room",component:function(){Z("\u521b\u5efa\u623f\u95f4");var e=Object(X.g)(It,X.e).username,t="".concat(e,"\u7684\u623f\u95f4"),n=Object(d.useState)(t),a=Object(He.a)(n,2),r=a[0],c=a[1],o=Object(d.useState)(xe.PUBLIC),i=Object(He.a)(o,2),l=i[0],u=i[1],s=Object(X.f)();Object(d.useEffect)((function(){s(m.getNumberOfOnlinePlayer())}),[s]);var v=Object(d.useCallback)((function(){s(f.createRoom(r,l))}),[r,l,s]),p=Object(d.useState)(!0),h=Object(He.a)(p,2),O=h[0],b=h[1],g=Object(d.useCallback)((function(e){b(!1),c(e.target.value)}),[c,b]);return E.a.createElement("div",{className:"view-room-creator"},E.a.createElement(ot.a,{style:{boxShadow:"none"},position:"static"},E.a.createElement("div",{className:"create-room-header"},E.a.createElement(Je.a,{onClick:function(){return s(Object(Me.c)())}},E.a.createElement(wt.a,null)),E.a.createElement("div",{className:"create-room-header-title"},"\u521b\u5efa\u623f\u95f4"))),E.a.createElement("div",{className:"view-room-creator-main"},E.a.createElement(Rt.a,{fullWidth:!0},E.a.createElement(st.a,null,E.a.createElement(Ct.a,null,E.a.createElement(et.a,{label:"\u623f\u95f4\u540d",fullWidth:!0,placeholder:"\u8bf7\u8f93\u5165\u623f\u95f4\u540d\u5b57",type:"text",variant:"outlined",value:O?t:r,onChange:g})),E.a.createElement(Nt.a,{value:l,onChange:function(e){return u(e.target.value)},name:"room-type"},E.a.createElement(Ct.a,{button:!0,onClick:function(){return u(xe.PUBLIC)}},E.a.createElement(jt.a,{value:xe.PUBLIC,control:E.a.createElement(_t.a,{color:"primary"}),label:"\u516c\u5f00",labelPlacement:"end"})),E.a.createElement(Ct.a,{button:!0,onClick:function(){return u(xe.PRIVATE)}},E.a.createElement(jt.a,{value:xe.PRIVATE,control:E.a.createElement(_t.a,{color:"primary"}),label:"\u79c1\u4eba(\u4e0d\u663e\u793a\u5728\u6e38\u620f\u5927\u5385)",labelPlacement:"end"}))),E.a.createElement(Ct.a,null,E.a.createElement(tt.a,{style:{boxShadow:"none"},onClick:v,fullWidth:!0,color:"primary",variant:"contained"},"\u521b\u5efa\u623f\u95f4"))))))}},{path:"/game/:id",component:function(){var e=Object(X.g)(bn,X.e),t=e.currentGame,n=e.user,a=Object(X.f)(),r=Object(d.useState)(""),c=Object(He.a)(r,2),i=c[0],u=c[1];Object(d.useEffect)((function(){null==t&&a(f.getGame())}),[t,a]);var s=Object(d.useState)(!1),m=Object(He.a)(s,2),v=m[0],p=m[1];Object(d.useEffect)((function(){var e=Re.on(Tt.REFRESH_GAME_USERS,(function(e){var t=e;a(l.createSetCurrentGameUsers(t))})),t=Re.on(Tt.PLAY_OVER,(function(e){var t=e.answer;u(t),p(!0)})),n=Re.on(Tt.GAME_OVER,(function(e){var t=e.user;a(o.createSetIsGaming(t.isGaming))})),r=Re.on(Tt.REFRESH_GAME,(function(e){var t=e.game;a(l.createSetCurrentGame(t))})),c=Re.on(Tt.CHANGE_DRAWER,(function(e){var t=e.game;a(l.createSetCurrentGame(t)),p(!1)}));return function(){e(),n(),r(),c(),t()}}),[u,p,a]);var h=Object(d.useMemo)((function(){return null!=n&&null!=t&&n.id===t.playInfo.drawer.id}),[n,t]);return null==t||null==n?E.a.createElement(Be,null):E.a.createElement(E.a.Fragment,null,E.a.createElement(Xe.a,{open:v},E.a.createElement(Qe.a,null,"\u6b63\u786e\u7b54\u6848\u662f: ",i),E.a.createElement(Ze.a,null,h?E.a.createElement(tt.a,{variant:"outlined",disabled:!0},"\u4fdd\u5b58\u6b64\u6b21\u753b\u4f5c\u5230\u672c\u5730"):null)),E.a.createElement("div",{className:"view-game"},E.a.createElement(hn,{isSelfPlaying:h,currentGame:t}),E.a.createElement("div",{className:"view-game-main"},E.a.createElement(vn,{isSelfPlaying:h,currentGame:t}),h?null:E.a.createElement(Zt,{wsClient:Re}),E.a.createElement(On,{user:n,currentGame:t}),E.a.createElement(pn,null))))}},{path:"/room/:roomId",component:function(){Z("\u623f\u95f4");var e=Object(X.g)(Kt,X.e),t=e.currentRoom,n=e.isReady,a=Object(Q.f)().roomId,r=parseInt(a,10),c=Object(X.f)(),i=Object(d.useCallback)((function(){c(f.makeGameIsReady(!n))}),[n,c]);return Object(d.useEffect)((function(){var e=Re.on(Tt.REFRESH_ROOM,(function(e,t){var n=t.data;c(l.createSetRoom(n))})),t=Re.on(Tt.START_GAME,(function(e,t){var n=t.data,a=n.user,r=n.game;Object(X.c)((function(){c(l.createSetCurrentGame(r)),c(l.createSetCurrentRoomStatus(Ae.GAMING)),c(o.createSetIsGaming(a.isGaming)),c(o.createSetIsReady(a.isReady))}))}));return function(){e(),t()}}),[r,c]),Object(d.useEffect)((function(){Number.isNaN(r)||c(f.enterRoom(r))}),[c,r]),null==a?E.a.createElement(Q.a,{to:"/"}):null==t?E.a.createElement(Be,null):E.a.createElement("div",{className:"view-playing-room"},E.a.createElement("div",{className:"view-playing-room-header"},E.a.createElement(Lt,null)),E.a.createElement("div",{className:"view-playing-room-main"},E.a.createElement(Jt,{users:t.users}),E.a.createElement("div",{className:"start-game-button-wrapper"},E.a.createElement(tt.a,{style:{boxShadow:"none"},onClick:i,color:"primary",className:"start-game-button",variant:"contained",fullWidth:!0},n?"\u53d6\u6d88\u51c6\u5907":"\u51c6\u5907")),E.a.createElement("div",{className:"room-message-wrapper"},E.a.createElement(Mt,null))))}},{path:"/",component:function(){Z("\u6e38\u620f\u5927\u5385");var e=Object(X.g)(Ot,X.e),t=e.numberOfOnlinePlayer,n=e.user,a=Object(X.f)();return ht||(a(i.createAddNotification(new ne("\u672c\u5e94\u7528\u6682\u65f6\u4e0d\u652f\u6301\u9f20\u6807\u7ed8\u753b","warn"))),ht=!0),Object(d.useEffect)((function(){a(m.getNumberOfOnlinePlayer())}),[a]),null==n?E.a.createElement(Be,null):E.a.createElement("div",{className:"view-game-lobby"},E.a.createElement("div",{className:"view-game-lobby-header"},E.a.createElement(ut,null)),E.a.createElement("div",{className:"view-game-lobby-main"},E.a.createElement(rt,null),E.a.createElement("div",{className:"room-list-wrapper"},E.a.createElement(pt,null))),E.a.createElement("div",{className:"view-game-lobby-footer"},E.a.createElement("div",{className:"number-of-online-player"},"\u5f53\u524d\u5728\u7ebf\u4eba\u6570: ",t)))}}]}]}]}];var jn=function(){return function e(t){return null==t||0===t.length?null:E.a.createElement(Q.d,null,t.map((function(t,n){var a=t.layout,r=t.component;return null==a?E.a.createElement(Q.b,{key:n,path:t.path,render:function(){return E.a.createElement(r,null,e(t.children))}}):E.a.createElement(Q.b,{key:n,path:t.path,render:function(){return E.a.createElement(a,null,E.a.createElement(r,null,e(t.children)))}})})))}(Rn)},Cn=Y?Object(h.e)(q(J),K(Object(h.a)(Object(b.a)(J),g.a))):Object(h.e)(q(J),Object(h.d)(Object(h.a)(Object(b.a)(J),g.a)));function _n(){var e=Object(X.f)();return Object(d.useEffect)((function(){var t=Re.on("refreshPlayerInfo",(function(t){var n=t;e(o.createSetUser(n))}));return function(){t()}}),[e]),E.a.createElement("div",{style:{},className:"App"},E.a.createElement(y.a,{history:J},E.a.createElement(jn,null)))}var Nn=function(){return E.a.createElement(X.a,{store:Cn},E.a.createElement(_n,null))};Y?(console.log("\u5f00\u53d1\u6a21\u5f0f"),p.a.render(E.a.createElement(Nn),document.getElementById("root"))):p.a.render(E.a.createElement(Nn),document.getElementById("root")),document.querySelector("body").addEventListener("touchmove",(function(e){e.preventDefault()}),{passive:!1})}},[[113,1,2]]]);
//# sourceMappingURL=main.1cf542c7.chunk.js.map