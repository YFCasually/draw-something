(this["webpackJsonpdraw-something-client"]=this["webpackJsonpdraw-something-client"]||[]).push([[0],{111:function(e,t,n){e.exports=n(137)},125:function(e,t,n){},126:function(e,t,n){},127:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){},130:function(e,t,n){},131:function(e,t,n){},132:function(e,t,n){},133:function(e,t,n){},134:function(e,t,n){},135:function(e,t,n){},136:function(e,t,n){},137:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"SET_USERNAME",(function(){return y})),n.d(a,"SET_USER",(function(){return C})),n.d(a,"SET_USER_CURRENT_ROOM_ID",(function(){return R})),n.d(a,"SET_IS_READY",(function(){return j})),n.d(a,"SET_IS_GAMING",(function(){return N}));var r={};n.r(r),n.d(r,"SET_NUMBER_OF_ONLINE_PLAYER",(function(){return k})),n.d(r,"ADD_NOTIFICATION",(function(){return _})),n.d(r,"SHIFT_NOTIFICATION",(function(){return T}));var c={};n.r(c),n.d(c,"SET_ROOM_LIST",(function(){return I})),n.d(c,"SET_CURRENT_ROOM_USERS",(function(){return A})),n.d(c,"SET_CURRENT_ROOM_STATUS",(function(){return D})),n.d(c,"SET_CURRENT_GAME",(function(){return x})),n.d(c,"SET_ROOM",(function(){return P}));var o={};n.r(o),n.d(o,"createSetUsername",(function(){return K})),n.d(o,"createSetUser",(function(){return Q})),n.d(o,"createSetIsGaming",(function(){return Z})),n.d(o,"createSetUserCurrentRoomId",(function(){return $})),n.d(o,"createSetIsReady",(function(){return ee}));var i={};n.r(i),n.d(i,"createSetNumberOfOnlinePlayer",(function(){return te})),n.d(i,"createAddNotification",(function(){return ne})),n.d(i,"createShiftNotification",(function(){return ae}));var l={};n.r(l),n.d(l,"createSetRoomList",(function(){return re})),n.d(l,"createSetCurrentRoomUsers",(function(){return ce})),n.d(l,"createSetRoom",(function(){return oe})),n.d(l,"createSetCurrentGame",(function(){return ie})),n.d(l,"createSetCurrentRoomStatus",(function(){return le}));var s={};n.r(s),n.d(s,"login",(function(){return se})),n.d(s,"changeUsername",(function(){return ue}));var u={};n.r(u),n.d(u,"getNumberOfOnlinePlayer",(function(){return me}));var m={};n.r(m),n.d(m,"getRoomList",(function(){return be})),n.d(m,"enterRoom",(function(){return we})),n.d(m,"leaveRoom",(function(){return ye})),n.d(m,"createRoom",(function(){return Ce})),n.d(m,"sendChatMessage",(function(){return Re})),n.d(m,"makeGameIsReady",(function(){return je})),n.d(m,"getGame",(function(){return Ne}));var f=n(0),d=n.n(f),v=n(10),h=n.n(v),p=n(30),E=n(34),g=n(82),O=n(68),b=n(9),S=n(26),w=n(36),y="SET_USERNAME",C="SET_USER",R="SET_USER_CURRENT_ROOM_ID",j="SET_IS_READY",N="SET_IS_GAMING",k="SET_NUMBER_OF_ONLINE_PLAYER",_="ADD_NOTIFICATION",T="REMOVE_NOTIFICATION",I="SET_ROOM_LIST",A="SET_CURRENT_ROOM_USERS",D="SET_CURRENT_ROOM_STATUS",x="SET_CURRENT_GAME",P="SET_ROOM",M={isLogining:!1,user:null,isRegistering:!1};var U=n(22),L=n(21);function G(){var e=localStorage.getItem("__token");return null!=e&&""===e.trim()?null:e}function F(e){localStorage.setItem("__token",e)}function z(e){return function(t){13===t.keyCode&&e()}}var W=["localhost","127.0.0.1","192.168"].some((function(e){return window.location.origin.includes(e)})),q=n(1),B=function(){function e(t,n,a){Object(U.a)(this,e),this.data=t,this.handler=n,this.desc=a,this.id=void 0,this.createAt=Date.now(),this.id="".concat(this.handler,"-").concat(Date.now())}return Object(L.a)(e,[{key:"toJSON",value:function(){return Object(q.a)({},this)}}]),e}();var V=function(){function e(t){Object(U.a)(this,e),this.options=t,this.isConnected=!1,this.ws=void 0,this.messageCache=[],this.eventMap=new Map,this.ws=new window.WebSocket(this.options.addr),this.init()}return Object(L.a)(e,[{key:"init",value:function(){var e=this;this.ws.onopen=function(t){e.isConnected=!0,"function"===typeof e.options.onopen&&e.options.onopen(t),e.sendMessageFromCache()},this.ws.onclose=function(t){e.isConnected=!1,"function"===typeof e.options.onclose&&(e.options.onclose(t),W&&console.log("\u8fde\u63a5\u65ad\u5f00"))},this.ws.onerror=function(t){"function"===typeof e.options.onerror&&e.options.onerror(t)},this.ws.onmessage=function(t){var n=t.data,a=JSON.parse(n);console.log("recive",a),e.emit("message",a),null!=a.requestId&&e.emit(a.requestId,a),null!=a.trigger&&e.emit(a.trigger,a)}}},{key:"sendMessageFromCache",value:function(){var e=this;this.messageCache.forEach((function(t){e.sendMessage(t)})),this.messageCache=[]}},{key:"sendMessage",value:function(e){this.isConnected?(console.log("sendMessage",e),this.ws.send(JSON.stringify(e))):this.messageCache.push(e)}},{key:"request",value:function(e,t){var n=this;return new Promise((function(a,r){try{var c=new B(t,e);n.on(c.id,(function e(t,o){null==o&&console.error("".concat(c.handler,"-").concat(c.id," \u8fd4\u56de\u6765\u7a7a\u7684message")),null!=o.error&&(n.emit("error",o),r(o.error)),a(o),null!=o.requestId&&n.off(o.requestId,e),W&&null!=o.requestId&&o.requestId!==c.id&&console.error("reqMsg.id: ".concat(c.id," !== respMsg.requestId\uff1a ").concat(o.requestId))})),n.sendMessage(c)}catch(o){console.error("request\u65f6\u53d1\u751f\u9519\u8bef ".concat(o))}}))}},{key:"on",value:function(e,t){var n=this,a=this.eventMap.get(e);return void 0==a&&(a=[],this.eventMap.set(e,a)),a.push(t),function(){n.off(e,t)}}},{key:"off",value:function(e,t){var n=this.eventMap.get(e);void 0!=n&&(n=n.filter((function(e){return e!==t})),this.eventMap.set(e,n))}},{key:"emit",value:function(e,t){var n=this.eventMap.get(e);void 0!==n&&n.forEach((function(e){return e(t.data,t)}))}}]),e}();var Y=W?{addr:"ws://127.0.0.1:9421"}:{addr:"ws://101.37.174.138:9421"},H=n(14),J=n.n(H),X=n(25);function K(e){return{type:a.SET_USERNAME,payload:e}}function Q(e){return{type:a.SET_USER,payload:e}}function Z(e){return{type:a.SET_IS_GAMING,payload:e}}function $(e){return{type:a.SET_USER_CURRENT_ROOM_ID,payload:e}}function ee(e){return{type:a.SET_IS_READY,payload:e}}function te(e){return{type:r.SET_NUMBER_OF_ONLINE_PLAYER,payload:e}}var ne=function(e){return{type:r.ADD_NOTIFICATION,payload:e}},ae=function(){return{type:r.SHIFT_NOTIFICATION}};function re(e){return{type:c.SET_ROOM_LIST,payload:e}}function ce(e){return{type:c.SET_CURRENT_ROOM_USERS,payload:e}}function oe(e){return{type:c.SET_ROOM,payload:e}}function ie(e){return{type:c.SET_CURRENT_GAME,payload:e}}function le(e){return{type:c.SET_CURRENT_ROOM_STATUS,payload:e}}function se(){return function(){var e=Object(X.a)(J.a.mark((function e(t,n){var a,r,c,i;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(),r=a.connection.wsClient,c=G(),e.next=4,r.request("login",c);case 4:F((i=e.sent.data).token),t(o.createSetUser(i));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}function ue(e){return function(){var t=Object(X.a)(J.a.mark((function t(n,a){var r,c,i;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a(),c=r.connection.wsClient,t.next=3,c.request("changeUsername",e);case 3:i=t.sent.data,n(o.createSetUsername(i));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}function me(){return function(){var e=Object(X.a)(J.a.mark((function e(t,n){var a,r,c;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(),r=a.connection.wsClient,e.prev=1,e.next=4,r.request("numberOfOnlineUser");case 4:c=e.sent.data,t(i.createSetNumberOfOnlinePlayer(c)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()}var fe,de=n(83),ve=n.n(de);!function(e){e.ERROR="error",e.WARN="warn",e.SUCCESS="success",e.NORMAL="nornal"}(fe||(fe={}));var he,pe,Ee=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fe.NORMAL;Object(U.a)(this,e),this.title=t,this.detail=n,this.type=a,this.id=ve()(),this.createAt=Date.now()},ge=n(19),Oe=n(6);function be(){return function(){var e=Object(X.a)(J.a.mark((function e(t,n){var a,r,c,o;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(),r=a.connection.wsClient,e.prev=1,e.next=4,r.request("roomList");case 4:c=e.sent,o=c.data,t(l.createSetRoomList(o)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()}!function(e){e.WAITING="waiting",e.GAMING="gaming"}(he||(he={})),function(e){e.PUBLIC="public",e.PRIVATE="private"}(pe||(pe={}));var Se=!1;function we(e){return function(){var t=Object(X.a)(J.a.mark((function t(n,a){var r,c,i,s,u,m;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Se){t.next=2;break}return t.abrupt("return");case 2:return Se=!0,r=a(),c=r.connection.wsClient,t.prev=4,t.next=7,c.request("userEnter",{id:e});case 7:i=t.sent,s=i.data,u=s.room,m=s.user,Object(Oe.c)((function(){n(l.createSetRoom(u)),n(o.createSetUserCurrentRoomId(m.currentRoomId)),n(Object(ge.e)("/room/".concat(u.id)))})),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),n(Object(ge.e)("/")),console.error(t.t0);case 16:return t.prev=16,Se=!1,t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[4,12,16,19]])})));return function(e,n){return t.apply(this,arguments)}}()}function ye(){return function(){var e=Object(X.a)(J.a.mark((function e(t,n){var a,r,c;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n(),r=a.connection.wsClient,null!=(c=a.user.user)&&null!=c.currentRoomId){e.next=3;break}return e.abrupt("return");case 3:try{r.request("userLeave"),t(o.createSetUserCurrentRoomId(void 0)),t(l.createSetRoom(null)),t(Object(ge.e)("/"))}catch(i){console.error(i)}case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}function Ce(e,t){return function(){var n=Object(X.a)(J.a.mark((function n(a,r){var c,o,i,l;return J.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=r(),o=c.connection.wsClient,n.prev=1,n.next=4,o.request("createRoom",{name:e,type:t});case 4:i=n.sent,l=i.data,a(we(l.id)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),console.error(n.t0);case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e,t){return n.apply(this,arguments)}}()}function Re(e){return function(){var t=Object(X.a)(J.a.mark((function t(n,a){var r,c;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=a(),c=r.connection.wsClient;try{c.request("sendChatMessage",{content:e})}catch(n){console.error(n)}case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}function je(e){var t=e?"makeGameReady":"cancelGameReady";return function(){var e=Object(X.a)(J.a.mark((function e(n,a){var r,c,i,s,u,m;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a(),c=r.connection.wsClient,e.prev=1,e.next=4,c.request(t);case 4:i=e.sent,s=i.data,u=s.user,m=s.room,n(l.createSetCurrentRoomUsers(m.users)),n(o.createSetIsReady(u.isReady)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()}function Ne(){return function(){var e=Object(X.a)(J.a.mark((function e(t,n){var a,r,c,o,s,u;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(),r=a.connection.wsClient,c=a.user.user,e.prev=1,e.next=4,r.request("getGame");case 4:o=e.sent,s=o.data,u=s.game,t(l.createSetCurrentGame(u)),t(l.createSetCurrentRoomStatus(he.GAMING)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),t(i.createAddNotification(new Ee(e.t0.title,void 0,fe.ERROR))),null!=c&&null!=c.currentRoomId?t(Object(ge.f)("/room/".concat(c.currentRoomId))):t(Object(ge.f)("/"));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()}var ke={wsClient:new V({addr:Y.addr,onopen:function(){console.log("\u670d\u52a1\u5668\u5df2\u8fde\u63a5"),an.dispatch(s.login())}})};var _e={numberOfOnlinePlayer:1,notifications:[]};var Te={roomList:[],currentRoom:null,currentGame:null};function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var Ae={user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;return Object(w.a)(e,(function(e){var n=t.type,r=t.payload;switch(n){case a.SET_USERNAME:null!=e.user&&(e.user.username=r);break;case a.SET_USER:e.user=r;break;case a.SET_IS_GAMING:null!=e.user&&(e.user.isGaming=r);break;case a.SET_IS_READY:null!=e.user&&(e.user.isReady=r);break;case a.SET_USER_CURRENT_ROOM_ID:null!=e.user&&(e.user.currentRoomId=r)}}))},connection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;return Object(w.a)(e,(function(){t.type}))},global:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;return Object(w.a)(e,(function(e){var n=t.type,a=t.payload;switch(n){case r.SET_NUMBER_OF_ONLINE_PLAYER:e.numberOfOnlinePlayer=a;break;case r.ADD_NOTIFICATION:e.notifications.push(a);break;case r.SHIFT_NOTIFICATION:e.notifications.shift()}}))},room:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;return Object(w.a)(e,(function(e){var n=t.type,a=t.payload;switch(n){case c.SET_ROOM_LIST:e.roomList=a;break;case c.SET_CURRENT_ROOM_USERS:null!=e.currentRoom&&(e.currentRoom.users=a);break;case c.SET_ROOM:e.currentRoom=a;break;case c.SET_CURRENT_GAME:e.currentGame=a;break;case c.SET_CURRENT_ROOM_STATUS:null!=e.currentRoom&&(e.currentRoom.status=a)}}))}},De=function(e){return Object(p.c)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(n,!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({router:Object(S.b)(e)},Ae))},xe=Object(E.a)(),Pe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||p.d;var Me=n(62),Ue=n(174);function Le(){return d.a.createElement("div",{className:"full-screen-loading",style:{display:"flex",justifyContent:"center",alignItems:"center"}},d.a.createElement(Ue.a,null))}n(125);var Ge,Fe=n(178),ze=n(181),We=n(179),qe=n(180),Be=n(86),Ve=(Ge={},Object(b.a)(Ge,he.GAMING,"\u6e38\u620f\u4e2d"),Object(b.a)(Ge,he.WAITING,"\u7b49\u5f85\u4e2d"),Ge);function Ye(e){var t=e.room,n=Object(Oe.f)();return d.a.createElement("div",{className:"room-list-room"},d.a.createElement("div",{className:"room-name"},t.name),d.a.createElement("div",{className:"room-info"},d.a.createElement("div",{className:"room-number"},"No.",String(t.id).padStart(5,"0")),d.a.createElement("div",{className:"room-status"},Ve[t.status])),d.a.createElement("div",{className:"room-actions"},d.a.createElement(Fe.a,{onClick:function(){return n(Object(ge.e)("/room/".concat(t.id)))},fullWidth:!0,variant:"outlined"},"\u52a0\u5165\u623f\u95f4")))}var He=function(e){return{roomList:e.room.roomList,wsClient:e.connection.wsClient}};function Je(){W&&console.log("render RoomList");var e=Object(Oe.g)(He,Oe.e),t=e.roomList,n=e.wsClient,a=Object(Oe.f)(),r=Object(f.useCallback)((function(){a(m.getRoomList())}),[a]);return Object(f.useEffect)((function(){r();var e=n.on("refreshRoomList",(function(e){var t=e;a(l.createSetRoomList(t))}));return function(){e()}}),[a,r,n]),d.a.createElement("div",{className:"room-list"},d.a.createElement(We.a,{subheader:d.a.createElement(qe.a,null,"\u623f\u95f4\u5217\u8868",d.a.createElement(ze.a,{onClick:r},d.a.createElement(Be.a,null))),className:"room-list"},0===t.length?d.a.createElement("div",{className:"no-room-text"},"\u6682\u65e0\u516c\u5f00\u623f\u95f4"):d.a.createElement("div",{className:"room-list-content"},t.map((function(e){return d.a.createElement(Ye,{key:e.id,room:e})})))))}var Xe=n(16),Ke=n(187),Qe=n(188),Ze=n(189),$e=n(196),et=n(182),tt=n(183),nt=n(186),at=n(194),rt=n(87),ct=(n(126),function(e){return{user:e.user.user}});function ot(){W&&console.log("render AccountCard");var e=Object(Oe.g)(ct,Oe.e).user,t=Object(f.useState)(null!=e?e.username:""),n=Object(Xe.a)(t,2),a=n[0],r=n[1],c=Object(f.useCallback)((function(e){return r(e.target.value.trim())}),[r]),o=Object(f.useState)(!1),i=Object(Xe.a)(o,2),l=i[0],u=i[1],m=Object(Oe.f)(),v=Object(f.useCallback)((function(){return u(!0)}),[u]),h=Object(f.useCallback)((function(){return u(!1)}),[u]),p=Object(f.useCallback)((function(){var t=0===a.trim().length;null==e||t||e.username===a||m(s.changeUsername(a)),t||h()}),[e,a,m,h]);return null==e?d.a.createElement(Le,null):d.a.createElement(d.a.Fragment,null,d.a.createElement($e.a,{open:l,onClose:h},d.a.createElement(et.a,null,"\u66f4\u6539\u7528\u6237\u540d"),d.a.createElement(tt.a,null,d.a.createElement(at.a,{fullWidth:!0,type:"text",placeholder:"\u7528\u6237\u540d",value:a,onChange:c})),d.a.createElement(nt.a,null,d.a.createElement(Fe.a,{disabled:0===a.trim().length,onClick:p},"\u786e\u5b9a"),d.a.createElement(Fe.a,{onClick:h},"\u53d6\u6d88"))),d.a.createElement("div",{className:"user-info"},d.a.createElement(Ke.a,null,d.a.createElement(Qe.a,{title:"\u4f60\u597d\uff0c".concat(e.username,"\uff01"),subheader:"\u767b\u9646\u4e8e".concat((new Date).toLocaleTimeString()),avatar:d.a.createElement(Ze.a,null,e.username[0]),action:d.a.createElement(ze.a,{onClick:v},d.a.createElement(rt.a,null))}))))}var it=n(190),lt=n(191),st=n(50),ut=n(88),mt=d.a.memo((function(){var e=Object(Oe.f)(),t=Object(f.useState)(!1),n=Object(Xe.a)(t,2),a=n[0],r=n[1],c=Object(f.useCallback)((function(){return r(!1)}),[r]),o=Object(f.useState)(""),i=Object(Xe.a)(o,2),l=i[0],s=i[1],u=Object(f.useCallback)((function(){0!==l.trim().length&&e(Object(ge.e)("/room/".concat(l)))}),[l,e]);return d.a.createElement(d.a.Fragment,null,d.a.createElement($e.a,{open:a,onClose:c},d.a.createElement(et.a,null,"\u67e5\u627e\u623f\u95f4"),d.a.createElement(tt.a,null,d.a.createElement(at.a,{fullWidth:!0,type:"text",placeholder:"\u623f\u95f4\u53f7",value:l,onChange:function(e){return s(e.target.value.trim())},onKeyUp:z(u)})),d.a.createElement(nt.a,null,d.a.createElement(Fe.a,{disabled:0===l.trim().length,onClick:u},"\u786e\u5b9a"),d.a.createElement(Fe.a,{onClick:c},"\u53d6\u6d88"))),d.a.createElement(it.a,{style:{boxShadow:"none"},position:"static"},d.a.createElement(lt.a,null,d.a.createElement(Fe.a,{onClick:function(){return r(!0)},color:"inherit"},d.a.createElement(ut.a,null),"\u67e5\u627e\u623f\u95f4"),d.a.createElement(st.a,{style:{flex:1,textAlign:"center"}},"\u4f60\u753b\u6211\u731c-\u6e38\u620f\u5927\u5385"),d.a.createElement(Fe.a,{onClick:function(){return e(Object(ge.e)("/create-room"))},color:"inherit"},"\u521b\u5efa\u623f\u95f4"))))}));n(127);function ft(e){var t=Object(f.useRef)("");Object(f.useEffect)((function(){return t.current=document.title,document.title=e,function(){document.title=t.current}}),[e])}var dt=function(e){return{numberOfOnlinePlayer:e.global.numberOfOnlinePlayer,user:e.user.user}};n(128);var vt=n(197),ht=n(89),pt=function(e){return{notifications:e.global.notifications}},Et=d.a.memo((function(){var e=Object(Oe.g)(pt,Oe.e).notifications,t=Object(Oe.f)(),n=Object(f.useCallback)((function(){t(i.createShiftNotification())}),[t]);return d.a.createElement(d.a.Fragment,null,e.map((function(e){return d.a.createElement(vt.a,{key:e.id,anchorOrigin:{vertical:"top",horizontal:"center"},open:!0,onClose:n,autoHideDuration:4e3,action:d.a.createElement(ze.a,{onClick:n,key:"close","aria-label":"close",color:"inherit"},d.a.createElement(ht.a,null)),message:d.a.createElement("span",null,null==e.detail?e.title:"".concat(e.title,"-").concat(e.detail))})})))}));n(129);var gt=n(184),Ot=n(193),bt=n(192),St=n(195),wt=n(198),yt=n(59),Ct=function(e){var t=e.global.numberOfOnlinePlayer,n=e.user.user;return{numberOfOnlinePlayer:t,username:null==n?"":n.username}};n(130);var Rt=n(15),jt=(n(131),function(e){var t=e.connection.wsClient,n=e.user.user;return{wsClient:t,username:null==n?"":n.username,userId:null==n?"":n.id}});var Nt,kt=function(){var e=Object(Oe.g)(jt,Oe.e),t=e.wsClient,n=e.userId,a=Object(f.useState)([]),r=Object(Xe.a)(a,2),c=r[0],o=r[1];Object(f.useEffect)((function(){return t.on("reciveChatMessage",(function(e,t){var n=t.data;o((function(e){var t;return(t=[n]).concat.apply(t,Object(Rt.a)(e))}))}))}),[t,o]);var i=Object(f.useState)(""),l=Object(Xe.a)(i,2),s=l[0],u=l[1],v=0!==s.trim().length,h=Object(Oe.f)(),p=Object(f.useCallback)((function(){v&&(u(""),h(m.sendChatMessage(s)))}),[v,s,h,u]);return d.a.createElement("div",{className:"room-message"},d.a.createElement(We.a,{className:"room-message-list"},c.map((function(e){return d.a.createElement(bt.a,{className:"room-message-list-item",key:e.id},d.a.createElement("div",{className:"room-message-speaker"},d.a.createElement("span",{className:"room-message-speaker-name"},e.speaker.id===n?"\u6211":e.speaker.name,":")),d.a.createElement("div",{className:"room-message-content"},e.content),d.a.createElement("div",{className:"room-message-speaker-time"},new Date(e.timestamp).toLocaleTimeString()))}))),d.a.createElement(We.a,{className:"room-message-sender"},d.a.createElement(bt.a,null,d.a.createElement(at.a,{variant:"outlined",value:s,onChange:function(e){return u(e.target.value)},onKeyUp:z(p),fullWidth:!0}),"\xa0",d.a.createElement(Fe.a,{onClick:p,disabled:!v,variant:"text"},"\u53d1\u9001"))))},_t=function(e){var t=e.room.currentRoom,n=e.user.user;return{wsClient:e.connection.wsClient,currentRoom:t,isReady:null!=n&&n.isReady}},Tt=(Nt={},Object(b.a)(Nt,pe.PRIVATE,"(\u79c1\u4eba)"),Object(b.a)(Nt,pe.PUBLIC,""),Nt);var It=function(e){return{user:e.user.user,pathname:e.router.location.pathname}};n(132),n(133);function At(e){e.avatar;var t=e.text;return d.a.createElement("div",{className:"avatar-box"},d.a.createElement("div",{className:"avatar-box-avatar"},t.length?t[0]:"A"),d.a.createElement("div",{className:"avatar-box-text"},t))}n(134);var Dt,xt=function(e){var t=e.wsClient,n=Object(f.useState)(""),a=Object(Xe.a)(n,2),r=a[0],c=a[1],o=Object(f.useCallback)((function(){if(0!==r.length){var e=new B(r,"guessAnswer");t.sendMessage(e),c("")}}),[r,t,c]);return d.a.createElement("div",{className:"answer-input-box"},d.a.createElement(at.a,{value:r,onChange:function(e){return c(e.target.value.trim())},placeholder:"\u7b54\u6848",className:"answer-input",variant:"outlined",type:"text"}),d.a.createElement(Fe.a,{disabled:0===r.length,variant:"outlined",onClick:o},"\u53d1\u9001"))},Pt=n(90),Mt=n(91),Ut=n(28),Lt=n(97),Gt=(n(135),function(){function e(t,n){Object(U.a)(this,e),this.ctx=void 0,this.canvasEl=void 0,this.canvasEl=null==t?document.createElement("canvas"):t,this.ctx=this.canvasEl.getContext("2d"),this.init(),null!=n&&(null!=n.penColor&&this.setPenColor(n.penColor),null!=n.penSize&&this.setPenSize(n.penSize))}return Object(L.a)(e,[{key:"penColor",get:function(){return this.ctx.strokeStyle},set:function(e){this.ctx.strokeStyle=e,this.ctx.fillStyle=e}},{key:"penSize",get:function(){return this.ctx.lineWidth},set:function(e){this.ctx.lineWidth=e}}]),Object(L.a)(e,[{key:"init",value:function(){this.ctx.fillStyle=this.penColor,this.ctx.strokeStyle=this.penColor,this.ctx.lineWidth=this.penSize}},{key:"getSetting",value:function(){return{penSize:this.penSize,penColor:this.penColor}}},{key:"setting",value:function(e){null!=e.penColor&&(this.penColor=e.penColor),null!=e.penSize&&(this.penSize=e.penSize)}},{key:"drawImage",value:function(e){var t=this;if("string"===typeof e){var n=new Image;n.onload=function(){t.clearCanvas(),t.drawImage(n)},n.src=e}else this.ctx.drawImage(e,0,0)}},{key:"drawPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.penSize/2,n=this.ctx;console.log("drawPoint","r",t,"lineWidth",this.ctx.lineWidth),n.beginPath(),n.arc(e.x,e.y,t,0,2*Math.PI),n.fill(),n.closePath()}},{key:"getSnapshot",value:function(){return this.canvasEl.toDataURL("image/jpeg")}},{key:"startDrawLine",value:function(e){var t=e,n=this.ctx;n.beginPath(),n.moveTo(t.x,t.y)}},{key:"drawLineTo",value:function(e){var t=this.ctx;t.lineTo(e.x,e.y),t.stroke()}},{key:"mount",value:function(e){var t=document.querySelector(e);if(window.el=t,console.log(t,e),null==t)throw new Error("\u65e0\u6cd5\u901a\u8fc7 ".concat(e," \u627e\u5230\u76f8\u5e94\u7684\u5143\u7d20\uff0c\u8bf7\u786e\u5b9a\u9009\u62e9\u5668\u4e66\u5199\u6b63\u786e"));t.append(this.canvasEl),this.canvasEl.height=t.clientHeight,this.canvasEl.width=t.clientWidth,this.clearCanvas()}},{key:"clearCanvas",value:function(){var e=this.ctx.fillStyle;this.ctx.fillStyle="#fff",this.ctx.clearRect(0,0,this.canvasEl.width,this.canvasEl.height),this.ctx.fillRect(0,0,this.canvasEl.width,this.canvasEl.height),this.ctx.fillStyle=e}},{key:"setOptions",value:function(e){null!=e.penColor&&this.setPenColor(e.penColor),null!=e.penSize&&this.setPenSize(e.penSize)}},{key:"getOptions",value:function(){return{penColor:this.penColor,penSize:this.penSize}}},{key:"setPenSize",value:function(e){this.ctx.lineWidth=e}},{key:"setPenColor",value:function(e){this.ctx.strokeStyle=e,this.ctx.fillStyle=e}}]),e}());!function(e){e.START_DRAW_LINE="startDrawLine",e.DRAW_LINE_TO="drawLineTo",e.END_DRAW_LINE="endDrawLine",e.DRAW_IMAGE="drawImage",e.CLEAR_CANVAS="clearCanvas"}(Dt||(Dt={}));var Ft=function e(t,n){Object(U.a)(this,e),this.type=t,this.payload=n},zt=n(95),Wt=n(96),qt=n(94),Bt=n(185),Vt=n(92),Yt=n(93),Ht=["#000","#F44336","#E91E63","#9C27B0","#2196F3","#48C6FF","#4CAF50","#8BC34A","#FFEB3B","#FFC107","#FF9800","#795548","#607D8B","#666","#999","#BBB","#DDD","#FFF"];function Jt(e){var t=e.anchorEl,n=e.penColor,a=e.setPenColor,r=Object(f.useState)(!1),c=Object(Xe.a)(r,2),o=c[0],i=c[1],l=Object(f.useCallback)((function(e){a(e),i(!1)}),[a,i]);return d.a.createElement(d.a.Fragment,null,d.a.createElement(ze.a,{style:{flex:"1"},onClick:function(){return i((function(e){return!e}))},className:"canvas-operation-list-item"},d.a.createElement(Vt.a,{style:{color:n},fontSize:"large"})),d.a.createElement(Bt.a,{anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},anchorEl:t,onClose:function(){return i(!1)},open:o},d.a.createElement("div",{className:"pen-color-wrapper"},Ht.map((function(e){return d.a.createElement(ze.a,{onClick:function(){return l(e)},key:e},d.a.createElement(Yt.a,{style:{border:"1px solid #000",color:e}}))})))))}var Xt=n(199);function Kt(e){var t=e.length,n=e.width,a=e.vertical,r=e.color;if(null==t&&(t=24),null==n&&(n=2),null==a&&(a=!1),null==r&&(r="#000"),a){var c=[n,t];t=c[0],n=c[1]}return d.a.createElement("div",{className:"plain-line",style:{height:n,width:t,backgroundColor:r}})}function Qt(e){var t=e.anchorEl,n=e.penColor,a=e.penSize,r=e.setPenSize,c=Object(f.useCallback)((function(e,t){r(t)}),[r]),o=Object(f.useState)(!1),i=Object(Xe.a)(o,2),l=i[0],s=i[1];return d.a.createElement(d.a.Fragment,null,d.a.createElement(ze.a,{style:{flex:"1"},onClick:function(){return s((function(e){return!e}))},className:"canvas-operation-list-item"},d.a.createElement(Kt,{color:n,length:30,width:a})),d.a.createElement(Bt.a,{anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},anchorEl:null==t?void 0:t,onClose:function(){return s(!1)},open:l},d.a.createElement("div",{className:"pen-size-slider-wrapper"},d.a.createElement(Xt.a,{style:{width:"80vw"},value:a,onChange:c,valueLabelDisplay:"auto",step:1,marks:!0,min:1,max:20}))))}function Zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var $t=function(e){function t(){var e,n;Object(U.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(Pt.a)(this,(e=Object(Mt.a)(t)).call.apply(e,[this].concat(r)))).state={futureDrawings:[],pastDrawings:[],penColor:"#000",penSize:1},n.posElRef=Object(f.createRef)(),n.draw=new Gt,n.changePlayingUserOff=void 0,n.drawActionOff=void 0,n.getPointFromEvent=function(e){var t=e.touches,n=e.target,a=t[0],r=a.clientX,c=a.clientY;return{x:r-n.offsetLeft,y:c-n.offsetTop}},n.endDrawing=function(){n.sendDrawActionToServer(Dt.END_DRAW_LINE,void 0,{newestDrawing:n.draw.getSnapshot()})},n.clearCanvas=function(){n.snapshotCurrentDrawing(),n.draw.clearCanvas(),n.sendDrawActionToServer(Dt.CLEAR_CANVAS,{newestDrawing:n.draw.getSnapshot()})},n.undoDrawing=function(){var e=Object(Ut.a)(n).draw,t=n.state,a=t.pastDrawings,r=t.futureDrawings;if(0!==a.length){var c=a.pop();e.drawImage(c),n.setState({pastDrawings:Object(Rt.a)(a),futureDrawings:[].concat(Object(Rt.a)(r),[e.getSnapshot()])}),n.sendDrawActionToServer(Dt.DRAW_IMAGE,c,{newestDrawing:c})}},n.redoDrawing=function(){var e=Object(Ut.a)(n).draw,t=n.state,a=t.pastDrawings,r=t.futureDrawings;if(0!==r.length){var c=r.pop();e.drawImage(c),n.setState({pastDrawings:[].concat(Object(Rt.a)(a),[e.getSnapshot()]),futureDrawings:Object(Rt.a)(r)}),n.sendDrawActionToServer(Dt.DRAW_IMAGE,c,{newestDrawing:c})}},n.setPenColor=function(e){n.draw.penColor=e,n.setState({penColor:e})},n.setPenSize=function(e){n.draw.penSize=e,n.setState({penSize:e})},n.handleTouchStart=function(e){n.snapshotCurrentDrawing();var t=n.getPointFromEvent(e);n.startDrawLine(t)},n.handleTouchMove=function(e){var t=n.getPointFromEvent(e);n.drawLineTo(t)},n.handleTouchEnd=function(e){n.endDrawing()},n}return Object(Lt.a)(t,e),Object(L.a)(t,[{key:"componentDidMount",value:function(){this.draw.mount("#id-canvas"),this.bindEvents();var e=this.props.initialDrawing;void 0!==e&&this.draw.drawImage(e)}},{key:"componentWillUnmount",value:function(){this.changePlayingUserOff&&this.changePlayingUserOff(),this.drawActionOff&&this.drawActionOff()}},{key:"bindEvents",value:function(){var e=this,t=this.props.wsClient,n=this.draw;this.changePlayingUserOff=t.on("changePlayingUser",(function(){e.clearCanvas(),e.setState({futureDrawings:[],pastDrawings:[]})})),this.drawActionOff=t.on("drawAction",(function(e){var t=e,a=t.type,r=t.payload;switch(a){case Dt.START_DRAW_LINE:var c=r,o=c.point,i=c.setting,l=n.getSetting();null!=i&&n.setting(i),n.drawPoint(o),n.startDrawLine(o),n.setting(l);break;case Dt.DRAW_LINE_TO:var s=r,u=s.point,m=s.setting,f=n.getSetting();null!=m&&n.setting(m),n.drawLineTo(u),n.setting(f);break;case Dt.CLEAR_CANVAS:n.clearCanvas();break;case Dt.DRAW_IMAGE:var d=r;n.drawImage(d)}}))}},{key:"sendDrawActionToServer",value:function(e,t,n){var a=this.props,r=a.wsClient;if(a.isSelfPlaying){var c=new Ft(e,t),o=new B(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zt(n,!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({drawAction:c},void 0!==n?n:{}),"drawAction");r.sendMessage(o)}}},{key:"snapshotCurrentDrawing",value:function(){var e=this.draw.getSnapshot();this.setState((function(t){return{pastDrawings:t.pastDrawings.concat(e)}}))}},{key:"startDrawLine",value:function(e){var t=this.draw;0!==this.state.futureDrawings.length&&this.setState({futureDrawings:[]}),t.drawPoint(e),t.startDrawLine(e),this.sendDrawActionToServer(Dt.START_DRAW_LINE,{point:e,setting:t.getSetting()})}},{key:"drawLineTo",value:function(e){var t=this.draw;t.drawLineTo(e),this.sendDrawActionToServer(Dt.DRAW_LINE_TO,{point:e,setting:t.getSetting()})}},{key:"render",value:function(){var e=this.props.isSelfPlaying,t=this.state,n=t.futureDrawings,a=t.pastDrawings,r=t.penColor,c=t.penSize,o=this.draw,i=this.setPenColor,l=this.setPenSize;return d.a.createElement("div",null,d.a.createElement("div",{className:"canvas-wrapper"},d.a.createElement("div",{id:"id-canvas",style:{width:375,height:300},onTouchStart:e?this.handleTouchStart:void 0,onTouchMove:e?this.handleTouchMove:void 0,onTouchEnd:e?this.handleTouchEnd:void 0})),e?d.a.createElement("div",{ref:this.posElRef,className:"game-canvas-operations"},d.a.createElement(Jt,{anchorEl:this.posElRef.current,draw:o,penColor:r,setPenColor:i}),d.a.createElement(Qt,{penSize:c,penColor:r,setPenSize:l,anchorEl:this.posElRef.current}),d.a.createElement(ze.a,{disabled:0===a.length,onClick:this.undoDrawing,style:{flex:"1"},className:"canvas-operation-list-item"},d.a.createElement(qt.a,{fontSize:"large"})),d.a.createElement(ze.a,{disabled:0===n.length,style:{flex:"1"},onClick:this.redoDrawing,className:"canvas-operation-list-item"},d.a.createElement(zt.a,{fontSize:"large"})),d.a.createElement(ze.a,{style:{flex:"1",color:"#000"},className:"canvas-operation-list-item",onClick:this.clearCanvas},d.a.createElement(Wt.a,{fontSize:"large"}))):null)}}]),t}(d.a.PureComponent),en=function(e){return{currentGame:e.room.currentGame,user:e.user.user,wsClient:e.connection.wsClient}};var tn=[{path:"/",component:function(e){var t=e.children,n=Object(Oe.g)(It,Oe.e),a=n.user,r=n.pathname,c=Object(Oe.f)();return Object(f.useEffect)((function(){if(null!=a)if(a.isGaming&&null==a.currentRoomId&&console.error("\u7528\u6237\u6b63\u5728\u6e38\u620f\u4e2d","\u4f46\u627e\u4e0d\u5230\u623f\u95f4\u53f7"),a.isGaming&&null!=a.currentRoomId){var e="/game/".concat(a.currentRoomId);r!==e&&c(Object(ge.f)(e))}else if(null!=a.currentRoomId){var t="/room/".concat(a.currentRoomId);r!==t&&c(Object(ge.f)(t))}}),[a,r,c]),t},children:[{path:"/",component:function(e){var t=e.children;return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"basic-layout"},t),d.a.createElement(Et,null))},children:[{path:"/create-room",component:function(){ft("\u521b\u5efa\u623f\u95f4");var e=Object(Oe.g)(Ct,Oe.e).username,t="".concat(e,"\u7684\u623f\u95f4"),n=Object(f.useState)(t),a=Object(Xe.a)(n,2),r=a[0],c=a[1],o=Object(f.useState)(pe.PUBLIC),i=Object(Xe.a)(o,2),l=i[0],s=i[1],v=Object(Oe.f)();Object(f.useEffect)((function(){v(u.getNumberOfOnlinePlayer())}),[v]);var h=Object(f.useCallback)((function(){v(m.createRoom(r,l))}),[r,l,v]),p=Object(f.useState)(!0),E=Object(Xe.a)(p,2),g=E[0],O=E[1],b=Object(f.useCallback)((function(e){O(!1),c(e.target.value)}),[c,O]);return d.a.createElement("div",{className:"view-room-creator"},d.a.createElement("div",{className:"view-room-creator-header"},d.a.createElement(it.a,{style:{boxShadow:"none"},position:"static"},d.a.createElement(lt.a,null,d.a.createElement(Fe.a,{onClick:function(){return v(Object(ge.c)())},color:"inherit"},d.a.createElement(yt.a,null),"\u8fd4\u56de"),d.a.createElement(st.a,{style:{flex:1,textAlign:"center"}},"\u521b\u5efa\u623f\u95f4")))),d.a.createElement("div",{className:"view-room-creator-main"},d.a.createElement(gt.a,{fullWidth:!0},d.a.createElement(We.a,null,d.a.createElement(bt.a,null,d.a.createElement(at.a,{label:"\u623f\u95f4\u540d",fullWidth:!0,placeholder:"\u8bf7\u8f93\u5165\u623f\u95f4\u540d\u5b57",type:"text",variant:"outlined",value:g?t:r,onChange:b})),d.a.createElement(wt.a,{value:l,onChange:function(e){return s(e.target.value)},name:"room-type"},d.a.createElement(bt.a,{button:!0,onClick:function(){return s(pe.PUBLIC)}},d.a.createElement(Ot.a,{value:pe.PUBLIC,control:d.a.createElement(St.a,{color:"primary"}),label:"\u516c\u5f00",labelPlacement:"end"})),d.a.createElement(bt.a,{button:!0,onClick:function(){return s(pe.PRIVATE)}},d.a.createElement(Ot.a,{value:pe.PRIVATE,control:d.a.createElement(St.a,{color:"primary"}),label:"\u79c1\u4eba(\u4e0d\u663e\u793a\u5728\u6e38\u620f\u5927\u5385)",labelPlacement:"end"}))),d.a.createElement(bt.a,null,d.a.createElement(Fe.a,{onClick:h,fullWidth:!0,variant:"outlined"},"\u521b\u5efa\u623f\u95f4"))))))}},{path:"/game/:id",component:function(){var e=Object(Oe.g)(en,Oe.e),t=e.currentGame,n=e.user,a=e.wsClient,r=Object(Oe.f)(),c=Object(f.useState)([]),i=Object(Xe.a)(c,2),s=i[0],u=i[1];Object(f.useEffect)((function(){var e=a.on("chattingMessage",(function(e){u((function(t){return[e].concat(Object(Rt.a)(t))}))})),t=a.on("gameOver",(function(e){var t=e.user;r(o.createSetIsGaming(t.isGaming))})),n=a.on("refreshGame",(function(e){var t=e.game;r(l.createSetCurrentGame(t))})),c=a.on("changePlayingUser",(function(e){var t=e.game;r(l.createSetCurrentGame(t))}));return function(){e(),t(),n(),c()}}),[u,r,a]),Object(f.useEffect)((function(){null==t&&r(m.getGame())}),[t,r]);var v=Object(f.useMemo)((function(){return null!=n&&null!=t&&n.id===t.playInfo.currentPlayer.id}),[n,t]);return null==t||null==n?d.a.createElement(Le,null):d.a.createElement("div",{className:"view-game"},d.a.createElement(it.a,{style:{boxShadow:"none"},position:"static"},d.a.createElement(lt.a,null,d.a.createElement(st.a,{variant:"h6"},v?"\u8bf7\u753b ".concat(t.playInfo.keyword.raw):"".concat(t.playInfo.keyword.raw.length,"\u4e2a\u5b57 ").concat(t.playInfo.keyword.hint)))),d.a.createElement("div",{className:"view-game-main"},d.a.createElement($t,{wsClient:a,isSelfPlaying:v,initialDrawing:t.newestDrawing}),d.a.createElement("div",{className:"player-list"},t.users.map((function(e){return d.a.createElement("div",{key:e.id,className:"player-list-item"},d.a.createElement(At,{text:"".concat(e.username).concat(e.id===n.id?"(\u6211)":"","(").concat(t.userScores[e.id],"}\u5206)")}))}))),d.a.createElement("div",{className:"game-message-list"},s.map((function(e){return d.a.createElement("div",{key:e.id,className:"game-message-list-item"},e.speaker.name,": ",e.content)})),d.a.createElement("div",{className:"game-message-list-item"},"\u8f66\u7b14\u5200 \u731c\uff1a\u6c7d\u8f66"))),d.a.createElement("div",{className:"view-game-footer"},v?null:d.a.createElement(xt,{wsClient:a})))}},{path:"/room/:roomId",component:function(){ft("\u6e38\u73a9\u623f\u95f4");var e=Object(Oe.g)(_t,Oe.e),t=e.currentRoom,n=e.wsClient,a=e.isReady,r=Object(Me.f)().roomId,c=parseInt(r,10),i=Object(Oe.f)(),s=Object(f.useCallback)((function(){i(m.makeGameIsReady(!a))}),[a,i]);return Object(f.useEffect)((function(){var e=n.on("refreshRoomInfo",(function(e,t){var n=t.data;i(l.createSetRoom(n))})),t=n.on("startGame",(function(e,t){var n=t.data,a=n.user,r=n.game;Object(Oe.c)((function(){i(l.createSetCurrentGame(r)),i(l.createSetCurrentRoomStatus(he.GAMING)),i(o.createSetIsGaming(a.isGaming)),i(Object(ge.e)("/game/".concat(c)))}))}));return function(){e(),t()}}),[c,n,i]),Object(f.useEffect)((function(){Number.isNaN(c)||i(m.enterRoom(c))}),[i,c]),null==r?d.a.createElement(Me.a,{to:"/"}):null==t?d.a.createElement(Le,null):d.a.createElement("div",{className:"view-playing-room"},d.a.createElement("div",{className:"view-playing-room-header"},d.a.createElement(it.a,{style:{boxShadow:"none"},position:"static"},d.a.createElement(lt.a,null,d.a.createElement(Fe.a,{onClick:function(){console.log("cliuck"),i(m.leaveRoom())},color:"inherit"},d.a.createElement(yt.a,null),"\u79bb\u5f00\u623f\u95f4"),d.a.createElement(st.a,{style:{flex:1,textAlign:"center"}},t.name,Tt[t.type]),d.a.createElement(Fe.a,{color:"inherit"},"\u623f\u95f4\u53f7: ",String(t.id).padStart(5,"0"))))),d.a.createElement("div",{className:"view-playing-room-main"},d.a.createElement("div",{className:"player-list"},Array(8).fill(null).map((function(e,n){if(n<t.users.length){var a=t.users[n];return d.a.createElement("div",{key:n,className:"player-list-item active"},d.a.createElement("div",{className:"player-list-item-avatar"},a.username[0]),d.a.createElement("div",{className:"player-list-item-username"},a.username,"(",a.isReady?"\u51c6\u5907":"\u672a\u51c6\u5907",")"))}return d.a.createElement("div",{key:n,className:"player-list-item"},d.a.createElement("div",{className:"player-list-item-avatar"},"\u7a7a"),d.a.createElement("div",{className:"player-list-item-username"},"\u7b49\u5f85\u52a0\u5165"))}))),d.a.createElement("div",{className:"start-game-button-wrapper"},d.a.createElement(Fe.a,{onClick:s,className:"start-game-button",variant:"outlined",fullWidth:!0},a?"\u53d6\u6d88\u51c6\u5907":"\u51c6\u5907")),d.a.createElement("div",{className:"room-message-wrapper"},d.a.createElement(kt,null))))}},{path:"/",component:function(){ft("\u6e38\u620f\u5927\u5385");var e=Object(Oe.g)(dt,Oe.e),t=e.numberOfOnlinePlayer,n=e.user,a=Object(Oe.f)();return Object(f.useEffect)((function(){a(u.getNumberOfOnlinePlayer())}),[a]),null==n?d.a.createElement(Le,null):d.a.createElement("div",{className:"view-game-lobby"},d.a.createElement("div",{className:"view-game-lobby-header"},d.a.createElement(mt,null)),d.a.createElement("div",{className:"view-game-lobby-main"},d.a.createElement(ot,null),d.a.createElement("div",{className:"room-list-wrapper"},d.a.createElement(Je,null))),d.a.createElement("div",{className:"view-game-lobby-footer"},d.a.createElement("div",{className:"number-of-online-player"},"\u5f53\u524d\u5728\u7ebf\u4eba\u6570: ",t)))}}]}]}];var nn=function(){return function e(t){return null==t||0===t.length?null:d.a.createElement(Me.d,null,t.map((function(t,n){var a=t.layout,r=t.component;return null==a?d.a.createElement(Me.b,{key:n,path:t.path,render:function(){return d.a.createElement(r,null,e(t.children))}}):d.a.createElement(Me.b,{key:n,path:t.path,render:function(){return d.a.createElement(a,null,d.a.createElement(r,null,e(t.children)))}})})))}(tn)},an=W?Object(p.e)(De(xe),Pe(Object(p.a)(Object(g.a)(xe),O.a))):Object(p.e)(De(xe),Object(p.d)(Object(p.a)(Object(g.a)(xe),O.a))),rn=function(e){return{wsClient:e.connection.wsClient}};function cn(){var e=Object(Oe.f)(),t=Object(Oe.g)(rn,Oe.e).wsClient;return Object(f.useEffect)((function(){var n=t.on("refreshPlayerInfo",(function(t){var n=t;e(o.createSetUser(n))}));return function(){n()}}),[t,e]),d.a.createElement("div",{style:{},className:"App"},d.a.createElement(S.a,{history:xe},d.a.createElement(nn,null)))}var on=function(){return d.a.createElement(Oe.a,{store:an},d.a.createElement(cn,null))};n(136);h.a.render(d.a.createElement(on),document.getElementById("root")),document.querySelector("body").addEventListener("touchstart",(function(e){e.preventDefault()}))}},[[111,1,2]]]);
//# sourceMappingURL=main.038ad7ef.chunk.js.map